<!DOCTYPE html>
<html lang="bs">
<head>
<meta charset="UTF-8">
<title>Fintech Premium Banking</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="fintech-favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<style>

@media (max-width:1024px) {
	.header {
		display: flex;          /* üëà KLJUƒåNO */
		flex-direction: column;
		gap: 12px;
		padding: 12px 16px;
	}

	.header-left {
		padding-left: 0;        /* skida desktop offset */
	}

	.header-right {
		grid-column: auto;      /* reset */
		justify-content: center;
		flex-wrap: wrap;
	}
}
@media (max-width:768px) {
	.container,
	.home-container {
		padding: 16px;   /* üëà pola manje */
	}
}

.login-dots {
	display: flex;
	justify-content: center;
	gap: 6px;
	margin-top: 12px;
}

.login-dots span {
	width: 6px;
	height: 6px;
	border-radius: 50%;
	background: #22d3ee;
	animation: dots 1.4s infinite ease-in-out both;
}

.login-dots span:nth-child(1) {
	animation-delay: -.32s
}

.login-dots span:nth-child(2) {
	animation-delay: -.16s
}

@keyframes dots {

	0%,
	80%,
	100% {
		transform: scale(0)
	}

	40% {
		transform: scale(1)
	}
}


/* === LOGIN SKELETON === */

.login-skeleton .skeleton {
	background: linear-gradient(90deg,
			rgba(255, 255, 255, .05),
			rgba(255, 255, 255, .15),
			rgba(255, 255, 255, .05));
	background-size: 200% 100%;
	animation: skeletonMove 1.2s infinite linear;
}

@keyframes skeletonMove {
	from {
		background-position: 200% 0
	}

	to {
		background-position: -200% 0
	}
}


.login-box.loading>* {
	opacity: 0;
}

.login-box.loading {
	pointer-events: none;
	filter: blur(0.3px);
}

.login-skeleton {
	display: none;
	flex-direction: column;
	gap: 14px;
}

.login-box.loading .login-skeleton {
	display: flex;
}

.login-skeleton .skeleton {
	height: 44px;
	border-radius: 12px;
}

.login-skeleton .skeleton.title {
	height: 28px;
	width: 70%;
	margin: 0 auto 6px;
}

.login-skeleton .skeleton.text {
	height: 14px;
	width: 85%;
	margin: 0 auto 16px;
}

.login-skeleton .skeleton.button {
	height: 46px;
	margin-top: 10px;
}

html {
	scroll-behavior: smooth;
}

* {
	box-sizing: border-box;
}

body {
	margin: 0;
	background:
		radial-gradient(circle at 10% 10%, rgba(34, 211, 238, .12), transparent 50%),
		radial-gradient(circle at 90% 20%, rgba(239, 68, 68, .08), transparent 50%),
		radial-gradient(circle at 50% 90%, rgba(168, 85, 247, .08), transparent 50%),
		#020817;
	color: #e5e7eb;
	font-family: Inter;
	min-height: 100vh;
}

::-webkit-scrollbar {
	width: 8px;
	height: 8px
}

::-webkit-scrollbar-track {
	background: transparent
}

::-webkit-scrollbar-thumb {
	background: rgba(34, 211, 238, .4);
	border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
	background: rgba(34, 211, 238, .6)
}

/* ===== TOP ALERT ===== */
.top-alert {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: 60px;
	background: linear-gradient(90deg, rgba(34, 211, 238, .12), rgba(168, 85, 247, .08));
	border-bottom: 1px solid rgba(34, 211, 238, .15);
	backdrop-filter: blur(12px);
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 12px;
	z-index: 5000;
	padding: 0 24px;
	animation: slideDown .5s ease-out;
}

.alert-icon {
	font-size: 18px;
	animation: pulse 2s infinite;
}

.alert-text {
	font-size: 13px;
	font-weight: 500;
	text-align: center;
	background: linear-gradient(90deg, #22d3ee, #a855f7);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

@keyframes slideDown {
	from {
		transform: translateY(-100%);
		opacity: 0
	}

	to {
		transform: translateY(0);
		opacity: 1
	}
}

@keyframes pulse {

	0%,
	100% {
		opacity: 1;
		transform: scale(1)
	}

	50% {
		opacity: .6;
		transform: scale(1.1)
	}
}

/* ===== HEADER ===== */
.header {
	display: grid;
	grid-template-columns: 1fr auto 1fr;
	align-items: center;
	backdrop-filter: blur(14px);
	border-bottom: 1px solid rgba(34, 211, 238, .15);
	animation: headerIn .6s ease-out;
}

@media (min-width:1024px) {
	.header {
		grid-template-columns: auto 1fr auto;
		padding: 0 32px;
	}
}

@media (min-width:1024px) {
	.header {
		padding: 12px 20px;
		/* üëà MANJI I ƒåIST */
		gap: 16px;
	}

	.header-left {
		padding-left: 0;
		/* uklanja suvi≈°an offset */
		gap: 12px;
	}

	.header-right {
		gap: 14px;
		/* zbijenije, ali ne tijesno */
	}

	.quick-stats {
		gap: 14px;
	}

	.stat-item {
		min-width: 90px;
	}
}

@keyframes headerIn {
	from {
		opacity: 0;
		transform: translateY(-10px);
	}

	to {
		opacity: 1;
		transform: none;
	}
}

.header-left {
	display: flex;
	align-items: center;
	gap: 16px;
	padding-left: 24px;
	/* OVO JE GLAVNI FIX */
}


.header-avatar {
	width: 60px;
	height: 60px;
	border-radius: 16px;
	background: linear-gradient(135deg, #22d3ee, #a855f7);
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 28px;
	font-weight: 700;
	box-shadow: 0 8px 24px rgba(34, 211, 238, .2);
}

.header-avatar:hover {
	transform: scale(1.05);
	box-shadow: 0 10px 30px rgba(34, 211, 238, .35);
}

.header-avatar,
.status-badge,
.header-btn {
	cursor: pointer;
	min-width: 44px;
	min-height: 44px;
}

.status-badge:hover {
	transform: translateY(-1px);
}

.header-btn:hover {
	transform: translateY(-2px) scale(1.05);
}


.header-text h1 {
	font-size: 25px;
	font-weight: 800;
	margin: 0;
	background: linear-gradient(90deg, #22d3ee, #a855f7);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	letter-spacing: -.5px;
}

.header-text p {
	font-size: 13px;
	opacity: .5;
	margin: 4px 0 0 0;
}

.header-right {
	grid-column: 3;
	display: flex;
	align-items: center;
	gap: 16px;
	justify-content: flex-end;
}

.status-badge {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 10px 18px;
	background: rgba(34, 197, 94, .1);
	border: 1.5px solid rgba(34, 197, 94, .3);
	border-radius: 12px;
	backdrop-filter: blur(10px);
	transition: .3s;
}

.status-badge:hover {
	background: rgba(34, 197, 94, .15);
	border-color: rgba(34, 197, 94, .4);
}

.status-dot {
	width: 12px;
	height: 12px;
	background: #22c55e;
	border-radius: 50%;
	animation: statusPulse 2s infinite;
	box-shadow: 0 0 8px rgba(34, 197, 94, .6);
}

@keyframes statusPulse {

	0%,
	100% {
		box-shadow: 0 0 6px rgba(34, 197, 94, .6)
	}

	50% {
		box-shadow: 0 0 12px rgba(34, 197, 94, .9)
	}
}


.status-text {
	font-size: 13px;
	font-weight: 600;
	color: #86efac;
}

.header-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 42px;
	height: 42px;
	border-radius: 12px;
	background: rgba(34, 211, 238, .1);
	border: 1.5px solid rgba(34, 211, 238, .25);
	color: #22d3ee;
	cursor: pointer;
	transition: all .3s;
	font-size: 18px;
}

.header-btn:hover {
	background: rgba(34, 211, 238, .2);
	border-color: rgba(34, 211, 238, .4);
	transform: translateY(-2px);
	box-shadow: 0 8px 20px rgba(34, 211, 238, .2);
}

.clock {
	font-weight: 600;
	letter-spacing: 1px;
	background: rgba(34, 211, 238, .1);
	padding: 10px 18px;
	border-radius: 14px;
	border: 1.5px solid rgba(34, 211, 238, .25);
	font-size: 14px;
	display: flex;
	align-items: center;
	gap: 8px;
}

.clock i {
	font-size: 16px;
}

.quick-stats {
	display: flex;
	align-items: center;
	/* BITNO */
	gap: 16px;
}

.stat-item {
	position: relative;
	padding: 10px 14px;
	border-radius: 14px;
	cursor: pointer;
	transition: all .25s ease;
	outline: none;
	user-select: none;
}

.stat-item-value {
	font-size: 17px;
	letter-spacing: -0.4px;
	line-height: 1.2;
}


.stat-item:hover {
	background: rgba(34, 211, 238, .18);
	transform: translateY(-2px);
}

.stat-item:focus,
.stat-item:active {
	outline: none;
	transform: scale(0.96);
}

.stat-item::after {
	content: "";
	position: absolute;
	inset: -2px;
	border-radius: 16px;
	background: linear-gradient(135deg,
			rgba(34, 211, 238, .6),
			rgba(168, 85, 247, .5));
	opacity: 0;
	filter: blur(6px);
	transition: .3s;
	z-index: -1;
}

.stat-item::before {
	content: attr(data-tip);
	position: absolute;
	bottom: -38px;
	left: 50%;
	transform: translateX(-50%);
	background: rgba(15, 23, 42, .95);
	border: 1px solid rgba(34, 211, 238, .3);
	padding: 6px 10px;
	font-size: 11px;
	border-radius: 8px;
	white-space: nowrap;
	opacity: 0;
	pointer-events: none;
	transition: .25s;
}

.stat-item:hover::before {
	opacity: 1;
}

.stat-item:active::after {
	opacity: .8;
}

.stat-item:focus-visible {
	box-shadow: 0 0 0 2px rgba(34, 211, 238, .5);
}

.stat-item-label {
	font-size: 11px;
	opacity: .6;
	text-transform: uppercase;
	letter-spacing: .6px;
	display: flex;
	align-items: center;
	gap: 6px;
}

.stat-item-label i {
	font-size: 14px;
	opacity: .8;
}

.stat-item-value {
	font-size: 16px;
	font-weight: 700;
	background: linear-gradient(90deg, #22d3ee, #0ea5e9);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	margin-top: 4px;
}

@media(max-width:1024px) {
	.quick-stats {
		display: none
	}

	.header {
		flex-direction: column;
		gap: 16px;
		text-align: center
	}

	.header-right {
		justify-content: center;
		width: 100%;
		flex-wrap: wrap
	}

	.header-left {
		flex-direction: column
	}
}

/* ===== LAYOUT ===== */
.container {
	display: grid;
	grid-template-columns: 1.2fr 0.8fr;
	gap: 28px;
	padding: 32px;
	max-width: 1400px;
	margin: auto;
}

.home-container {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
	gap: 24px;
	padding: 32px;
	max-width: 1400px;
	margin: auto;
}

@media(max-width:1024px) {
	.container {
		grid-template-columns: 1fr
	}

	.home-container {
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr))
	}
}

/* ===== CARD ===== */
.card {
	background: rgba(15, 23, 42, 0.85);
	border-radius: 20px;
	padding: 20px;
	border: 1px solid rgba(255, 255, 255, 0.08);
	transition: transform 0.3s ease, box-shadow 0.3s ease;
	box-shadow: 0 10px 30px rgba(0, 0, 0, .35),
		inset 0 1px 0 rgba(255, 255, 255, .05);
}

.card::before {
	content: "";
	position: absolute;
	inset: 0;
	pointer-events: none;
	background: linear-gradient(120deg,
			transparent 30%,
			rgba(34, 211, 238, .08),
			transparent 70%);
	opacity: 0;
	transition: .6s ease;
	border-radius: 20px;
}

.card:hover::before {
	opacity: 1
}

.card:hover {
	transform: translateY(-6px);
	box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
	border-color: transparent;
}


.card>* {
	position: relative;
	z-index: 1;
}

.card h3 {
	margin: 0 0 8px 0;
	font-size: 18px;
	font-weight: 700;
	display: flex;
	align-items: center;
	gap: 10px;
}

.card h3 i {
	font-size: 20px;
	background: linear-gradient(135deg, #22d3ee, #0ea5e9);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.card .sub {
	opacity: .6;
	font-size: 13px;
	margin-bottom: 16px;
}

/* ===== HOME SECTION ===== */
.home-card {
	background: linear-gradient(135deg, rgba(2, 8, 23, .75), rgba(15, 23, 42, .5));
	backdrop-filter: blur(20px);
	border: 1px solid rgba(34, 211, 238, .1);
	border-radius: 20px;
	padding: 20px;
	position: relative;
	overflow: hidden;
	transition: all .3s cubic-bezier(.4, 0, .2, 1);
	box-shadow: 0 20px 60px rgba(0, 0, 0, .3);
	cursor: pointer;
}

.home-card::before {
	content: "";
	position: absolute;
	inset: 0;
	pointer-events: none;
	background: linear-gradient(120deg, transparent 30%, rgba(34, 211, 238, .08), transparent 70%);
	opacity: 0;
	transition: .6s ease;
}

.home-card:hover::before {
	opacity: 1
}

.home-card:hover {
	transform: translateY(-8px);
	border-color: rgba(34, 211, 238, .25);
	box-shadow: 0 30px 80px rgba(34, 211, 238, .15);
}

.home-card>* {
	position: relative;
	z-index: 1;
}

.home-card-icon {
	font-size: 40px;
	margin-bottom: 12px;
	color: #22d3ee;
}

.home-card h4 {
	font-size: 16px;
	font-weight: 700;
	margin: 0 0 6px 0;
}

.home-card p {
	font-size: 12px;
	opacity: .6;
	margin: 0;
}

/* ===== BANK CARD ===== */
.bank-card-wrapper {
	display: flex;
	justify-content: center;
	margin-bottom: 24px;
}

.bank-card {
	width: 100%;
	max-width: 380px;
	aspect-ratio: 1.586;
	border-radius: 20px;
	padding: 28px;
	background: linear-gradient(135deg,
			rgba(34, 211, 238, .15),
			rgba(168, 85, 247, .08)),
		linear-gradient(to bottom right, #020617, #111827);
	border: 1.5px solid rgba(34, 211, 238, .2);
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	position: relative;
	overflow: hidden;
	transition: all .4s cubic-bezier(.4, 0, .2, 1);
	box-shadow:
		0 25px 50px rgba(34, 211, 238, .15),
		inset 0 1px 0 rgba(255, 255, 255, .08);
}

.bank-card::after {
	content: "";
	position: absolute;
	inset: -60%;
	background: linear-gradient(120deg,
			transparent 40%,
			rgba(34, 211, 238, .25),
			transparent 60%);
	animation: holo 8s linear infinite;
}

.bank-card:hover {
	transform: rotateX(8deg) rotateY(-8deg) translateZ(0);
	box-shadow:
		0 35px 80px rgba(34, 211, 238, .2),
		inset 0 1px 0 rgba(34, 211, 238, .3);
}

@keyframes holo {
	0% {
		transform: translateX(-100%) rotate(25deg)
	}

	100% {
		transform: translateX(100%) rotate(25deg)
	}
}

.card-top {
	display: flex;
	justify-content: space-between;
	align-items: center;
	font-size: 14px;
	font-weight: 600;
}

.card-brand {
	background: linear-gradient(90deg, #22d3ee, #0ea5e9);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.status {
	padding: 6px 14px;
	border-radius: 999px;
	font-size: 11px;
	font-weight: 600;
	transition: .3s;
	backdrop-filter: blur(10px);
}

.status.active {
	background: rgba(34, 197, 94, .2);
	color: #86efac;
	box-shadow: 0 0 12px rgba(34, 197, 94, .3);
	border: 1px solid rgba(34, 197, 94, .4);
}

.status.frozen {
	background: rgba(239, 68, 68, .2);
	color: #fca5a5;
	box-shadow: 0 0 12px rgba(239, 68, 68, .3);
	border: 1px solid rgba(239, 68, 68, .4);
}

.card-chip {
	width: 50px;
	height: 36px;
	background: linear-gradient(135deg, #facc15, #ca8a04);
	border-radius: 8px;
	margin: 20px 0;
	box-shadow: 0 0 25px rgba(250, 204, 21, .35);
}

.card-number {
	letter-spacing: 3px;
	font-size: 16px;
	font-weight: 500;
}

.card-footer {
	display: flex;
	justify-content: space-between;
	font-size: 13px;
	opacity: .85;
	font-weight: 500;
}

/* ===== BALANCE SECTION ===== */
.balance-section {
	margin-top: 28px;
	padding: 20px;
	background: linear-gradient(135deg, rgba(34, 211, 238, .08), rgba(168, 85, 247, .06));
	border: 1.5px solid rgba(34, 211, 238, .15);
	border-radius: 16px;
}

.balance-section .sub {
	margin-bottom: 12px;
}

.balance-amount {
	font-size: 36px;
	font-weight: 700;
	background: linear-gradient(90deg, #22d3ee, #06b6d4);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	margin: 8px 0;
	letter-spacing: -1px;
}

/* ===== INPUTS ===== */
.form-group {
	margin-top: 18px;
}

.form-group label {
	display: block;
	font-size: 12px;
	font-weight: 600;
	margin-bottom: 8px;
	text-transform: uppercase;
	letter-spacing: .5px;
	opacity: .7;
}

input,
select {
	width: 100%;
	background: rgba(2, 8, 23, .6);
	border: 1.5px solid rgba(34, 211, 238, .15);
	border-radius: 12px;
	padding: 12px 14px;
	color: #e5e7eb;
	transition: all .2s;
	font-family: Inter;
	font-size: 14px;
}

input::placeholder {
	opacity: .4
}

input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
	-webkit-appearance: none;
	margin: 0;
}

input[type=number] {
	-moz-appearance: textfield;
}

input:focus,
select:focus {
	outline: none;
	border-color: #22d3ee;
}


select {
	background: linear-gradient(135deg, rgba(34, 211, 238, .1), rgba(168, 85, 247, .08)),
		rgba(2, 8, 23, .6);
	background-clip: padding-box;
	cursor: pointer;
}

select option {
	background: #020817;
	color: #e5e7eb;
}

/* ===== BUTTONS ===== */
.btn {
	border: none;
	padding: 12px 20px;
	border-radius: 12px;
	font-weight: 600;
	cursor: pointer;
	transition: all .3s cubic-bezier(.4, 0, .2, 1);
	position: relative;
	overflow: hidden;
	font-size: 14px;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
}

button:focus-visible {
	outline: none;
	box-shadow: 0 0 0 2px rgba(34, 211, 238, .6);
}

@media(max-width:768px) {
	.balance-amount {
		font-size: 30px;
	}

	.header-text h1 {
		font-size: 18px;
	}
}


button:active,
.action-btn:active,
.stat-item:active {
	transform: scale(.97);
}

.btn:disabled {
	opacity: .5;
	cursor: not-allowed
}

.btn-primary {
	background: #22d3ee;
	color: #020817;
}

.btn-primary:hover {
	background: #0ea5e9;
	transform: translateY(-2px);
}

.btn-success {
	background: linear-gradient(135deg, rgba(34, 197, 94, .8), rgba(22, 163, 74, .8));
	color: #fff;
	border: 1.5px solid rgba(34, 197, 94, .4);
	box-shadow: 0 8px 25px rgba(34, 197, 94, .25);
}

.btn-success:hover:not(:disabled) {
	box-shadow: 0 12px 40px rgba(34, 197, 94, .4);
	transform: translateY(-3px);
	background: linear-gradient(135deg, rgba(34, 197, 94, .95), rgba(22, 163, 74, .95));
}

.btn-danger {
	background: linear-gradient(135deg, rgba(239, 68, 68, .8), rgba(153, 27, 27, .8));
	color: white;
	border: 1.5px solid rgba(239, 68, 68, .4);
	box-shadow: 0 8px 25px rgba(239, 68, 68, .25);
}

.btn-danger:hover:not(:disabled) {
	box-shadow: 0 12px 40px rgba(239, 68, 68, .4);
	transform: translateY(-3px);
	background: linear-gradient(135deg, rgba(239, 68, 68, .95), rgba(153, 27, 27, .95));
}

.btn::after {
	content: "";
	position: absolute;
	inset: 0;
	background: linear-gradient(120deg,
			transparent 30%,
			rgba(255, 255, 255, .25),
			transparent 70%);
	transform: translateX(-100%);
}

.btn:hover::after {
	animation: btnShine .6s ease;
}

@keyframes btnShine {
	to {
		transform: translateX(100%)
	}
}


/* ===== ACTION BUTTONS ===== */
.button-row {
	display: flex;
	gap: 10px;
	margin-top: 20px;
}

.button-row .btn {
	flex: 1;
}

.quick-actions {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
	gap: 10px;
	margin-top: 20px;
}

.action-btn {
	background: rgba(34, 211, 238, .08);
	border: 1.5px solid rgba(34, 211, 238, .2);
	padding: 14px 12px;
	border-radius: 14px;
	font-size: 11px;
	cursor: pointer;
	transition: all .3s;
	text-align: center;
	font-weight: 600;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 8px;
	color: #e5e7eb;
}

.action-icon {
	font-size: 28px;
	width: 44px;
	height: 44px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(34, 211, 238, .1);
	border-radius: 10px;
	transition: .3s;
	color: #22d3ee;
}

.action-btn:hover .action-icon {
	background: rgba(34, 211, 238, .2);
	transform: scale(1.1);
}

.action-btn:hover {
	background: rgba(34, 211, 238, .15);
	border-color: rgba(34, 211, 238, .4);
	transform: translateY(-3px);
	box-shadow: 0 8px 20px rgba(34, 211, 238, .2);
	color: #22d3ee;
}

.action-btn.active {
	background: linear-gradient(135deg, rgba(34, 211, 238, .3), rgba(168, 85, 247, .2));
	border-color: #22d3ee;
	color: #22d3ee;
	box-shadow: 0 8px 25px rgba(34, 211, 238, .3);
}

/* ===== CHARTS ===== */
canvas {
	opacity: 0;
	transform: scale(.95);
	animation: chartIn 1s ease-out forwards;
}

@keyframes chartIn {
	to {
		opacity: 1;
		transform: scale(1)
	}
}

#spendChart {
	height: 200px;
	max-height: 200px;
}

#riskChart {
	height: 240px;
	max-height: 240px;
}

#categoryChart {
	height: 260px;
	max-height: 260px;
}

.chart-container {
	position: relative;
	margin-top: 16px;
}

.chart-label {
	font-size: 12px;
	opacity: .6;
	margin-top: 12px;
	background: rgba(34, 211, 238, .08);
	padding: 8px 12px;
	border-radius: 8px;
	border-left: 3px solid #22d3ee;
}

/* ===== CATEGORY CONTROLS ===== */
.category-controls {
	display: flex;
	gap: 8px;
	margin: 16px 0;
	flex-wrap: wrap;
	justify-content: center;
}

.category-filter {
	padding: 8px 16px;
	background: rgba(34, 211, 238, .08);
	border: 1.5px solid rgba(34, 211, 238, .2);
	border-radius: 8px;
	font-size: 12px;
	cursor: pointer;
	transition: .3s;
	font-weight: 600;
	color: #e5e7eb;
}

.category-filter:hover {
	background: rgba(34, 211, 238, .15);
	border-color: rgba(34, 211, 238, .35);
}

.category-filter.active {
	background: linear-gradient(135deg, #22d3ee, #0ea5e9);
	color: #0b0e14;
	border-color: #22d3ee;
	box-shadow: 0 4px 12px rgba(34, 211, 238, .3);
}

/* ===== CATEGORY CHART IMPROVEMENTS ===== */
.category-stats {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
	gap: 12px;
	margin-top: 20px;
}

.category-stat {
	background: rgba(34, 211, 238, .08);
	border: 1px solid rgba(34, 211, 238, .15);
	border-radius: 12px;
	padding: 12px;
	text-align: center;
	transition: .3s;
}

.category-stat:hover {
	background: rgba(34, 211, 238, .12);
	border-color: rgba(34, 211, 238, .3);
}

.category-stat-icon {
	font-size: 24px;
	margin-bottom: 6px;
	color: #22d3ee;
}

.category-stat-name {
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	opacity: .7;
	margin-bottom: 8px;
	color: #ffffff;
}

.category-stat-value {
	font-size: 18px;
	font-weight: 700;
	color: #22d3ee;
	display: block;
	margin-top: 4px;
}

/* ===== RISK SECTION ===== */
.risk-wrap {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 20px 0;
	flex-direction: column;
	gap: 16px;
}

.risk-chart-container {
	position: relative;
	width: 180px;
	height: 180px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.risk-ring {
	position: absolute;
	inset: 12px;
	border-radius: 50%;
	pointer-events: none;
	filter: blur(4px);
	opacity: .35;
	transition: .6s ease;
}

.risk-ring.danger {
	animation: riskPulse 2.5s ease-in-out infinite;
}

@keyframes riskPulse {
	0% {
		transform: scale(1);
		opacity: .3
	}

	50% {
		transform: scale(1.04);
		opacity: .5
	}

	100% {
		transform: scale(1);
		opacity: .3
	}
}


.risk-value {
	position: relative;
	z-index: 2;
	text-align: center;
}

.risk-value strong {
	font-size: 46px;
	line-height: 1.15;
	letter-spacing: -0.5px;
}

.risk-tooltip {
	font-size: 12px;
	margin-top: 8px;
	opacity: .7;
	font-weight: 500;
}

.risk-text {
	font-size: 14px;
	opacity: .8;
	margin-top: 12px;
	font-weight: 600;
}

.risk-analysis {
	margin-top: 16px;
	padding: 16px;
	background: rgba(34, 211, 238, .08);
	border-radius: 12px;
	border-left: 4px solid #22d3ee;
}

.risk-analysis-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 8px 0;
	font-size: 12px;
	border-bottom: 1px solid rgba(34, 211, 238, .1);
}

.risk-analysis-item:last-child {
	border-bottom: none;
}

.risk-analysis-label {
	opacity: .7;
}

.risk-analysis-meter {
	flex: 1;
	height: 4px;
	background: rgba(34, 211, 238, .2);
	border-radius: 2px;
	margin: 0 12px;
	overflow: hidden;
}

.risk-analysis-bar {
	height: 100%;
	border-radius: 2px;
	transition: width .4s ease;
}

.risk-analysis-value {
	color: #22d3ee;
	font-weight: 600;
	min-width: 35px;
	text-align: right;
}

/* ===== STATS GRID ===== */
.stats-grid {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 12px;
	margin-top: 16px;
}

.stat-box {
	background: rgba(34, 211, 238, .08);
	border: 1px solid rgba(34, 211, 238, .15);
	border-radius: 12px;
	padding: 14px;
	text-align: center;
	font-size: 12px;
	transition: .3s;
}

.stat-box:hover {
	background: rgba(34, 211, 238, .12);
	border-color: rgba(34, 211, 238, .3);
}

.stat-box strong {
	display: block;
	font-size: 17px;
	background: linear-gradient(90deg, #22d3ee, #0ea5e9);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	margin-bottom: 4px;
	line-height: 1.3;
	letter-spacing: -0.3px;
}

/* ===== PAYMENT CATEGORIES ===== */
.payment-category-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 10px;
	margin-top: 12px;
}

.payment-category-btn {
	padding: 12px;
	background: rgba(34, 211, 238, .08);
	border: 1.5px solid rgba(34, 211, 238, .2);
	border-radius: 12px;
	cursor: pointer;
	transition: all .3s;
	text-align: center;
	font-weight: 600;
	font-size: 13px;
	color: #ffffff;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 8px;
}

.payment-category-btn i {
	font-size: 22px;
	color: #22d3ee;
}

.payment-category-btn:hover {
	background: rgba(34, 211, 238, .15);
	border-color: rgba(34, 211, 238, .4);
	transform: translateY(-3px);
}

.payment-category-btn.active {
	background: linear-gradient(135deg, rgba(34, 211, 238, .3), rgba(168, 85, 247, .2));
	border-color: #22d3ee;
	color: #ffffff;
	box-shadow: 0 8px 25px rgba(34, 211, 238, .3);
}

/* ===== CURRENCY LIST ===== */
.currency-list {
	display: grid;
	gap: 8px;
	margin-top: 12px;
	max-height: 200px;
	overflow-y: auto;
}

.currency-item {
	padding: 10px 12px;
	background: rgba(34, 211, 238, .08);
	border: 1px solid rgba(34, 211, 238, .15);
	border-radius: 10px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	cursor: pointer;
	transition: .3s;
	font-size: 13px;
	position: relative;
	overflow: hidden;
}

.currency-item::after {
	content: "";
	position: absolute;
	inset: 0;
	background: linear-gradient(120deg,
			transparent 30%,
			rgba(34, 211, 238, .25),
			transparent 70%);
	opacity: 0;
	transition: .4s;
}

.currency-item:hover {
	background: rgba(34, 211, 238, .12);
	border-color: rgba(34, 211, 238, .3);
}

.currency-item strong {
	color: #22d3ee;
}

.currency-item.active {
	border-color: #22d3ee;
	background: rgba(34, 211, 238, .18);
}

/* ===== AI CHAT ===== */
.chat {
	display: flex;
	flex-direction: column;
	height: 520px;
}

.chat-header {
	margin-bottom: 16px;
}

.chat-header h3 {
	margin: 0 0 4px 0;
	font-size: 16px;
	font-weight: 700;
}

.chat-header .sub {
	margin: 0;
}

.chat-log {
	flex: 1;
	overflow-y: auto;
	font-size: 13px;
	padding-right: 8px;
	margin-bottom: 14px;
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.msg {
	animation: msgIn .3s ease-out both;
	padding: 12px 14px;
	border-radius: 12px;
	max-width: 85%;
	word-wrap: break-word;
	line-height: 1.4;
}

.msg.user {
	color: #0b0e14;
	background: linear-gradient(135deg, #22d3ee, #0ea5e9);
	align-self: flex-end;
	border-bottom-right-radius: 3px;
	font-weight: 500;
	box-shadow: 0 4px 15px rgba(34, 211, 238, .3);
}

.msg.bot {
	color: #e5e7eb;
	background: rgba(51, 65, 85, .5);
	border: 1px solid rgba(34, 211, 238, .25);
	align-self: flex-start;
	border-bottom-left-radius: 3px;
}

.msg.bot::after {
	content: "";
	display: inline-block;
	width: 6px;
	height: 6px;
	margin-left: 8px;
	border-radius: 50%;
	background: #22d3ee;
	animation: blink 1.2s infinite;
}

@keyframes blink {

	0%,
	100% {
		opacity: .2
	}

	50% {
		opacity: 1
	}
}

@keyframes msgIn {
	from {
		opacity: 0;
		transform: translateY(8px)
	}

	to {
		opacity: 1;
		transform: none
	}
}

.chat-input-wrap {
	display: flex;
	gap: 8px;
	align-items: flex-end;
}

.chat-input-wrap input {
	margin: 0;
	flex: 1;
}

.chat-input-wrap .btn {
	padding: 11px 14px;
	height: 42px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 18px;
	flex-shrink: 0;
}

/* ===== NOTIFICATION ===== */
.notification {
	position: fixed;
  padding: 12px 14px;      /* BILO 14px 18px */
	bottom: 24px;
	left: 50%;
	transform: translateX(-50%);
	max-width: 340px;
	width: calc(100% - 32px);
	background: linear-gradient(135deg,
			rgba(34, 211, 238, .95),
			rgba(14, 165, 233, .9));
	border: 1.5px solid rgba(34, 211, 238, .5);
	border-radius: 12px;
	color: #0b0e14;
	font-weight: 600;
	font-size: 12px;
	backdrop-filter: blur(15px);
	box-shadow: 0 20px 50px rgba(34, 211, 238, .35);
	z-index: 10000;
	animation: toastIn .4s cubic-bezier(.4, 0, .2, 1);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.notification i {
	font-size: 18px;
	margin-right: 6px;
}

.notification::after {
	content: "";
	position: absolute;
	bottom: 0;
	left: 0;
	height: 3px;
	width: 100%;
	background: rgba(255, 255, 255, .4);
	animation: notifLife 2.5s linear forwards;
}

@keyframes notifLife {
	from {
		width: 100%
	}

	to {
		width: 0
	}
}


@keyframes toastIn {
	from {
		transform: translateX(-50%) translateY(30px);
		opacity: 0;
	}

	to {
		transform: translateX(-50%) translateY(0);
		opacity: 1;
	}
}

@media (max-width:768px) {
	.notification {
		top: auto;
		left: 12px;
		right: 12px;
		bottom: 16px;
		transform: none;
		border-radius: 16px;
	}
}

.notification.danger {
	background: linear-gradient(135deg, rgba(239, 68, 68, .95), rgba(153, 27, 27, .85));
	border-color: rgba(239, 68, 68, .5);
	box-shadow: 0 15px 50px rgba(239, 68, 68, .3);
	color: #fff;
}

.notification.success {
	background: linear-gradient(135deg, rgba(34, 197, 94, .95), rgba(22, 163, 74, .85));
	border-color: rgba(34, 197, 94, .5);
	box-shadow: 0 15px 50px rgba(34, 197, 94, .3);
	color: #fff;
}

.notification.warning {
	background: linear-gradient(135deg, rgba(250, 204, 21, .95), rgba(217, 119, 6, .85));
	border-color: rgba(250, 204, 21, .5);
	box-shadow: 0 15px 50px rgba(250, 204, 21, .3);
	color: #0b0e14;
}

.notification.update {
	background: linear-gradient(135deg, rgba(168, 85, 247, .95), rgba(124, 58, 202, .85));
	border-color: rgba(168, 85, 247, .5);
	box-shadow: 0 15px 50px rgba(168, 85, 247, .3);
	color: #fff;
}

@keyframes slideIn {
	from {
		transform: translateY(-10px);
		opacity: 0;
	}

	to {
		transform: none;
		opacity: 1;
	}
}

@media (max-width:768px) {
	@keyframes slideIn {
		from {
			transform: translateY(20px);
			opacity: 0;
		}

		to {
			transform: none;
			opacity: 1;
		}
	}
}


/* ===== BALANCE FLASH ===== */
.balance-flash {
	animation: balanceFlash .6s ease;
}

@keyframes balanceFlash {
	0% {
		color: #22d3ee;
		text-shadow: 0 0 15px rgba(34, 211, 238, .8)
	}

	100% {
		color: inherit;
		text-shadow: none
	}
}

.bank-card.frozen {
	filter: grayscale(.8) brightness(.5);
	box-shadow:
		0 25px 50px rgba(239, 68, 68, .2),
		inset 0 0 30px rgba(239, 68, 68, .15);
}

/* ===== SETTINGS ===== */
.settings-panel {
	background: rgba(34, 211, 238, .05);
	border: 1.5px solid rgba(34, 211, 238, .15);
	border-radius: 14px;
	padding: 18px;
	margin-top: 20px;
}

.settings-panel h4 {
	margin: 0 0 16px 0;
	font-size: 13px;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: .5px;
	opacity: .8;
	display: flex;
	align-items: center;
	gap: 8px;
}

.settings-panel h4 i {
	font-size: 15px;
	color: #22d3ee;
}

.settings-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 12px 0;
	border-bottom: 1px solid rgba(34, 211, 238, .1);
	font-size: 13px;
}

.settings-item:last-child {
	border-bottom: none;
}

.settings-label {
	display: flex;
	flex-direction: column;
	gap: 4px;
	flex: 1;
}

.settings-label strong {
	color: #e5e7eb;
}

.settings-label small {
	opacity: .5;
	font-size: 11px;
}

.toggle-switch {
	position: relative;
	width: 44px;
	height: 24px;
	background: rgba(34, 211, 238, .2);
	border-radius: 12px;
	cursor: pointer;
	transition: .3s;
	border: 1.5px solid rgba(34, 211, 238, .2);
}

.toggle-switch.active {
	background: rgba(34, 197, 94, .4);
	border-color: rgba(34, 197, 94, .4);
}

.toggle-switch::after {
	content: "";
	position: absolute;
	top: 2px;
	left: 2px;
	width: 18px;
	height: 18px;
	background: #fff;
	border-radius: 9px;
	transition: .3s;
}

.toggle-switch.active::after {
	left: 22px;
}

.settings-select {
	padding: 6px 10px;
	font-size: 12px;
	border: 1.5px solid rgba(34, 211, 238, .2);
	background: rgba(2, 8, 23, .6);
	color: #e5e7eb;
	border-radius: 8px;
	cursor: pointer;
}

/* ===== TRANSACTIONS PREVIEW ===== */
.transactions-preview {
	margin-top: 20px;
	padding: 16px;
	background: rgba(34, 211, 238, .08);
	border: 1px solid rgba(34, 211, 238, .15);
	border-radius: 14px;
}

.transactions-preview h4 {
	font-size: 13px;
	font-weight: 700;
	margin: 0 0 12px 0;
	text-transform: uppercase;
	letter-spacing: .5px;
	display: flex;
	align-items: center;
	gap: 8px;
}

.transactions-preview h4 i {
	font-size: 15px;
	color: #22d3ee;
}

.transaction-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 10px 0;
	border-bottom: 1px solid rgba(34, 211, 238, .1);
	font-size: 12px;
}

.transaction-item:last-child {
	border-bottom: none;
}

.transaction-left {
	display: flex;
	gap: 8px;
	align-items: center;
}

.transaction-icon {
	width: 36px;
	height: 36px;
	border-radius: 8px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 18px;
}

.transaction-details strong {
	display: block;
	margin-bottom: 2px;
}

.transaction-details span {
	opacity: .6;
	font-size: 11px;
}

.transaction-amount {
	font-weight: 700;
	color: #22d3ee;
}

/* ===== MODAL DIALOG ===== */
.modal {
	display: none;
	position: fixed;
	inset: 0;
	background: rgba(2, 8, 23, .75);
	backdrop-filter: blur(12px);
	z-index: 10000;
	align-items: center;
	justify-content: center;
	animation: fadeIn .3s ease;
	overflow-y: auto;
}

.modal.active {
	display: flex;
}

.modal-content {
	background: linear-gradient(135deg, rgba(2, 8, 23, .95), rgba(15, 23, 42, .85));
	border: 1.5px solid rgba(34, 211, 238, .25);
	border-radius: 20px;
	padding: 28px;
	max-width: 500px;
	width: 90%;
	box-shadow: 0 25px 100px rgba(0, 0, 0, .5);
	animation: slideUp .4s ease;
	margin: auto;
}

.modal-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 20px;
}

.modal-header h2 {
	margin: 0;
	font-size: 20px;
}

.modal-close {
	background: none;
	border: none;
	color: #e5e7eb;
	font-size: 24px;
	cursor: pointer;
	transition: .3s;
	padding: 0;
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.modal-close:hover {
	color: #22d3ee;
	transform: rotate(90deg);
}

@keyframes fadeIn {
	from {
		opacity: 0
	}

	to {
		opacity: 1
	}
}

@keyframes slideUp {
	from {
		transform: translateY(40px);
		opacity: 0
	}

	to {
		transform: none;
		opacity: 1
	}
}

/* ===== SETTINGS PAGE ===== */
.settings-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
	gap: 16px;
}

.settings-card {
	background: linear-gradient(135deg, rgba(2, 8, 23, .75), rgba(15, 23, 42, .5));
	border: 1px solid rgba(34, 211, 238, .1);
	border-radius: 16px;
	padding: 20px;
	transition: all .3s;
}

.settings-card:hover {
	transform: translateY(-4px);
	border-color: rgba(34, 211, 238, .25);
}

.settings-card h4 {
	margin: 0 0 12px 0;
	font-size: 14px;
	font-weight: 700;
	display: flex;
	align-items: center;
	gap: 8px;
	color: #22d3ee;
}

.settings-card i {
	font-size: 20px;
}

.settings-card-list {
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.settings-card-item {
	display: flex;
	align-items: center;
	justify-content: space-between;
	font-size: 13px;
	padding: 8px 0;
}

/* ===== PAGE NAVIGATION ===== */
.page-nav {
	position: fixed;
	top: 20px;
	right: 180px;
	z-index: 4999;
}

.page-nav button {
	padding: 8px 16px;
	background: rgba(34, 211, 238, .1);
	border: 1.5px solid rgba(34, 211, 238, .25);
	color: #22d3ee;
	border-radius: 10px;
	cursor: pointer;
	transition: all .3s;
	font-weight: 600;
	font-size: 12px;
	margin: 0 4px;
}

.page-nav button:hover {
	background: rgba(34, 211, 238, .2);
	border-color: rgba(34, 211, 238, .4);
}

.page-nav button.active {
	background: linear-gradient(135deg, #22d3ee, #0ea5e9);
	color: #0b0e14;
	border-color: #22d3ee;
}

/* ===== UPDATE BANNER ===== */
.update-banner {
	position: fixed;
	bottom: 30px;
	right: 30px;
	background: linear-gradient(135deg, rgba(168, 85, 247, .95), rgba(124, 58, 202, .85));
	border: 1.5px solid rgba(168, 85, 247, .5);
	border-radius: 14px;
	padding: 16px 20px;
	color: #fff;
	font-weight: 600;
	font-size: 13px;
	backdrop-filter: blur(15px);
	box-shadow: 0 15px 50px rgba(168, 85, 247, .3);
	animation: slideIn .4s cubic-bezier(.4, 0, .2, 1);
	z-index: 9999;
	max-width: 300px;
	display: flex;
	gap: 12px;
	align-items: center;
}

.update-banner i {
	font-size: 20px;
	animation: pulse 2s infinite;
}

.update-close {
	background: none;
	border: none;
	color: #fff;
	cursor: pointer;
	font-size: 16px;
	margin-left: auto;
	transition: .3s;
}

.update-close:hover {
	color: rgba(255, 255, 255, .7);
}

/* ===== RESPONSIVE ===== */
@media (max-width:768px) {
	.header {
		padding: 16px;
		margin-top: 70px
	}

	.container {
		padding: 16px;
		gap: 16px
	}

	.home-container {
		padding: 16px;
		gap: 16px
	}

	.card {
		padding: 16px
	}

	#spendChart {
		height: 140px
	}

	#categoryChart {
		height: 200px
	}

	.notification {
		right: 10px;
		left: 10px
	}

	.quick-actions {
		grid-template-columns: repeat(2, 1fr)
	}

	.chat {
		height: 400px
	}

	.quick-stats {
		display: none
	}

	.page-nav {
		right: 10px;
		top: auto;
		bottom: 20px
	}

	.page-nav button {
		padding: 6px 12px;
		font-size: 11px;
		margin: 4px 2px
	}

	.category-controls {
		justify-content: center
	}

	.category-stats {
		grid-template-columns: repeat(3, 1fr)
	}

	.update-banner {
		right: 10px;
		left: 10px;
		bottom: 100px
	}
}

@media (max-width:480px) {
	.header-text h1 {
		font-size: 20px
	}

	.button-row {
		flex-direction: column
	}

	.category-stats {
		grid-template-columns: 1fr 1fr
	}

	.stats-grid {
		grid-template-columns: 1fr
	}

	.modal-content {
		width: 95%;
		padding: 20px
	}

	.balance-amount {
		font-size: 28px
	}

	.page-nav {
		width: 100%;
		right: auto;
		left: auto;
		bottom: auto;
		top: 65px
	}

	.page-nav button {
		width: 48%;
		margin: 4px 1%
	}

	.update-banner {
		width: 90%;
		left: 5%;
		right: auto
	}
}

/* === PAGE VISIBILITY FIX === */
.page-content {
	display: none;
	width: 100%;
	animation: fadeUp .5s ease;
}

.page-content.active>* {
	animation: fadeUp .5s ease both;
	width: 100%;

}

@media(max-width:600px) {

	.risk-analysis,
	.settings-panel {
		display: none;
	}
}


@keyframes fadeUp {
	from {
		opacity: 0;
		transform: translateY(8px);
	}

	to {
		opacity: 1;
		transform: none;
	}
}

.page-content.active {
	display: block;
}

@media (max-width:768px) {
	.top-alert {
		height: auto;
		padding: 12px;
	}

	.header {
		margin-top: 90px;
	}
}

/* === HEADER FINAL OVERRIDE === */
.header {
	position: relative;
	z-index: 2000;
}


/* Modern micro-interactions */
button,
.card,
.home-card {
	will-change: transform;
}

button,
.btn,
.card,
.home-card,
.stat-item,
.action-btn {
	transition: all .25s ease;
}

.card:hover {
	transform: translateY(-10px) scale(1.01);
}

/* Smooth font rendering */
body {
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	overflow-x: hidden;
}

/* === PATCH: RISK % ALIGNMENT === */
.risk-value {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.risk-value span {
	font-size: 16px;
	margin-top: 4px;
}


/* === PATCH: UPDATE MODAL === */
.update-modal {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, .75);
	backdrop-filter: blur(6px);
	display: none;
	align-items: center;
	justify-content: center;
	z-index: 10000;
}

.update-modal.active {
	display: flex;
}

.update-box {
	background: linear-gradient(135deg, rgba(2, 8, 23, .98), rgba(15, 23, 42, .95));
	border: 1.5px solid rgba(168, 85, 247, .4);
	border-radius: 20px;
	padding: 28px;
	max-width: 520px;
	width: 92%;
	box-shadow: 0 30px 120px rgba(0, 0, 0, .6);
}

.update-box h2 {
	margin: 0 0 12px 0;
	font-size: 22px;
	background: linear-gradient(90deg, #a855f7, #22d3ee);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
}

.update-log {
	display: grid;
	gap: 10px;
	margin-top: 16px;
}

.update-item {
	background: rgba(168, 85, 247, .12);
	padding: 10px 14px;
	border-radius: 10px;
	font-size: 13px;
}

.update-confirm {
	margin-top: 22px;
	width: 100%;
	padding: 12px;
	border: none;
	border-radius: 12px;
	background: linear-gradient(135deg, #22d3ee, #0ea5e9);
	font-weight: 700;
	cursor: pointer;
}

/* FIX: Razmak izmeƒëu % i grafikona (Risk) */
.risk-chart-container {
	position: relative;
}

.risk-value {
	position: absolute;
	inset: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	pointer-events: none;
}

.risk-value strong {
	font-size: 48px;
	line-height: 1;
}

.risk-value span {
	font-size: 18px;
	margin-top: 6px;
	opacity: 0.6;
}

/* FIX: Header vidljiv na desktopu */
.header {
	position: relative;
	z-index: 2000;
}

.top-alert {
	z-index: 3000;
}

/* Desktop poravnanje */
margin-top: 0; /* üëà OBAVEZNO */
@media (min-width: 1024px) {
	.header {
		margin-top: 80px;
	}
}

/* MOBILE FIXES */
@media (max-width: 600px) {
	.risk-chart-container {
		width: 150px;
		height: 150px;
	}

	.risk-value strong {
		font-size: 38px;
	}

	.payment-category-grid {
		grid-template-columns: repeat(2, 1fr);
	}

	.header-right {
		gap: 10px;
	}
}

/* LOGIN SCREEN */
.login-screen {
	position: fixed;
	inset: 0;
	background:
		radial-gradient(circle at 20% 20%, rgba(34, 211, 238, .15), transparent 40%),
		radial-gradient(circle at 80% 80%, rgba(168, 85, 247, .15), transparent 40%),
		#020817;
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 20000;
	opacity: 0;
	pointer-events: none;
	transition: .6s ease;
}

.login-screen.active {
	opacity: 1;
	pointer-events: all;
}

.login-box {
	width: 90%;
	max-width: 360px;
	background: rgba(15, 23, 42, .85);
	border: 1.5px solid rgba(34, 211, 238, .3);
	border-radius: 20px;
	padding: 32px;
	text-align: center;
	box-shadow: 0 40px 120px rgba(0, 0, 0, .6);
	animation: loginIn .6s ease;
}

@keyframes loginIn {
	from {
		transform: translateY(40px);
		opacity: 0
	}

	to {
		transform: none;
		opacity: 1
	}
}

.login-box h2 {
	margin: 0 0 8px 0;
	font-size: 26px;
	background: linear-gradient(90deg, #22d3ee, #a855f7);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
}

.login-box p {
	font-size: 13px;
	opacity: .6;
	margin-bottom: 24px;
}

.login-box input {
	margin-bottom: 14px;
	text-align: center;
}

.login-box button {
	width: 100%;
	padding: 12px;
	border: none;
	border-radius: 12px;
	background: linear-gradient(135deg, #22d3ee, #0ea5e9);
	font-weight: 700;
	cursor: pointer;
	margin-top: 8px;
}

.login-box small {
	display: block;
	margin-top: 16px;
	opacity: .4;
	font-size: 11px;
}

@media (max-width:768px) {
	.header {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 14px;
		padding: 14px 16px;
		margin-top: 90px;
	}

	.header-left {
		flex-direction: column;
		align-items: center;
		padding-left: 0;
		text-align: center;
		gap: 8px;
	}

	.header-text h1 {
		font-size: 20px;
		line-height: 1.2;
	}

	.header-text p {
		font-size: 12px;
	}

	.header-right {
		width: 100%;
		justify-content: center;
		flex-wrap: wrap;
		gap: 10px;
	}

	.clock {
		order: 3;
		width: 100%;
		justify-content: center;
	}

	.status-badge {
		order: 1;
	}
}

.header-btn,
.status-badge,
.clock {
	min-height: 44px;
	/* Apple / Google touch standard */
}

.header-btn {
	width: 44px;
	height: 44px;
}

@media (max-width:480px) {
	.header * {
		max-width: 100%;
	}
}

@media (hover:hover) {
	.stat-item:hover {
		background: rgba(34, 211, 238, .12);
		animation-play-state: paused;

	}
}


.balance-meta {
	font-size: 11px;
	opacity: .5;
	display: flex;
	align-items: center;
	gap: 6px;
}

.balance-amount.changed {
	animation: balancePop .5s ease;
}

@keyframes balancePop {
	0% {
		transform: scale(1)
	}

	50% {
		transform: scale(1.04)
	}

	100% {
		transform: scale(1)
	}
}

/* HIGHLIGHT EFFECT */
.highlight {
	animation: highlightPulse 1.2s ease;
}

@keyframes highlightPulse {
	0% {
		box-shadow: 0 0 0 rgba(34, 211, 238, 0);
		background: rgba(34, 211, 238, .05);
	}

	50% {
		box-shadow: 0 0 30px rgba(34, 211, 238, .45);
		background: rgba(34, 211, 238, .15);
	}

	100% {
		box-shadow: none;
		background: inherit;
	}
}
</style>
</head>

<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-screen active">
  <div class="login-box">
    <div class="login-skeleton">
  <div class="skeleton title"></div>
  <div class="skeleton text"></div>

  <div class="skeleton"></div>
  <div class="skeleton"></div>

  <div class="skeleton button"></div>
  <div class="login-dots" id="loginDots">
  <span></span><span></span><span></span>
</div>

</div>


    <h2>Fintech Nova</h2>
    <p>Siguran pristup va≈°em raƒçunu</p>

    <input id="loginName" type="text" placeholder="Ime korisnika">
    <input id="loginPin" type="password" placeholder="PIN kod">

    <button onclick="login()">Prijava</button>

    <small>Demo: upi≈°i bilo ≈°ta</small>
  </div>
</div>


<!-- TOP ALERT -->
<div class="top-alert">
  <i class="fas fa-shield-alt alert-icon"></i>
  <div class="alert-text">
    <span id="topAlertText">Dobrodo≈°ao u Fintech Nova - Sigurna finansijska rje≈°enja</span>
  </div>
</div>


<!-- PAGE NAVIGATION -->
<div class="page-nav">
  <button class="nav-btn active" data-page="dashboard" onclick="switchPage('dashboard')">
    <i class="fas fa-chart-line"></i> Dashboard
  </button>
  <button class="nav-btn" data-page="home" onclick="switchPage('home')">
    <i class="fas fa-home"></i> Va≈° finansijski sistem
  </button>
</div>

<!-- HEADER -->
<div class="header">
  <div class="header-left">
    <div class="header-avatar" id="userInitials">FN</div>
    <div class="header-text">
      <h1>Dobrodo≈°ao nazad, <span id="userName">Korisniƒçe</span>!</h1>
      <p id="headerSubtitle">Pregled kartice i sigurnosnih aktivnosti</p>
    </div>
  </div>

  <div class="header-right">
    <div class="quick-stats">
      <div class="stat-item" id="headerBalanceStat" data-tip="Ukupna raspolo≈æiva sredstva">
        <div class="stat-item-label"><i class="fas fa-wallet"></i> Saldo</div>
        <div class="stat-item-value" id="headerBalance">‚Ç¨2340</div>
      </div>
     <div class="stat-item" id="headerRiskStat" data-tip="Sigurnosni rizik raƒçuna">
        <div class="stat-item-label"><i class="fas fa-shield"></i> Rizik</div>
        <div class="stat-item-value" id="headerRisk">32%</div>
      </div>
    </div>
    <div class="status-badge">
      <div class="status-dot"></div>
      <div class="status-text">Aktivan</div>
    </div>
    <button class="header-btn" title="Notifikacije" onclick="showNotification('success', 'üì¨ Nema novih notifikacija!')">
      <i class="fas fa-bell"></i>
    </button>
    <button class="header-btn" title="Postavke" onclick="openSettings()">
      <i class="fas fa-cog"></i>
    </button>
    <div id="clock" class="clock">
      <i class="fas fa-clock"></i>
      <span id="clockTime">00:00:00</span>
    </div>
  </div>
</div>

<!-- DASHBOARD PAGE -->
<div id="dashboardPage" class="page-content" style="display:block;">

<!-- MAIN CONTAINER -->
<div class="container">

<!-- LEFT SIDE - MAIN CARD & ACTIONS -->
<div>
  <div class="card">
    <!-- BANK CARD -->
    <div class="bank-card-wrapper">
      <div class="bank-card">
        <div class="card-top">
          <span class="card-brand">Fintech Nova</span>
          <span id="cardStatus" class="status active">Aktivna</span>
        </div>
        <div class="card-chip"></div>
        <div class="card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4821</div>
        <div class="card-footer">
          <span id="cardName">JOHN DOE</span>
          <span>09/28</span>
        </div>
      </div>
    </div>

    <!-- BALANCE SECTION -->
    <div class="balance-section">
      <p class="sub">Ukupna raspolo≈æiva sredstva</p>
      <div class="balance-amount"><span id="symbol">‚Ç¨</span><span id="balance">2340.00</span></div>
      <div class="balance-meta">
  <i class="fas fa-sync-alt"></i> A≈æurirano prije par sekundi
</div>

      <div class="form-group">
        <label>Valuta</label>
        <select id="currency" onchange="render()">
          <option value="EUR">EUR - Euro</option>
          <option value="BAM">BAM - Konvertibilna Marka</option>
          <option value="USD">USD - Ameriƒçki Dolar</option>
        </select>
      </div>
    </div>

    <!-- QUICK ACTIONS -->
    <h3 style="margin-top:28px"><i class="fas fa-bolt"></i> Najƒçe≈°ƒáe kori≈°tene akcije</h3>
    <div class="quick-actions">
      <button class="action-btn" onclick="quickAction('transfer')" title="Prenos sredstava">
        <div class="action-icon"><i class="fas fa-arrow-right"></i></div>
        <span>Prenos</span>
      </button>
      <button class="action-btn" onclick="quickAction('request')" title="Zahtjev plaƒáanja">
        <div class="action-icon"><i class="fas fa-arrow-left"></i></div>
        <span>Zahtjev</span>
      </button>
      <button class="action-btn" onclick="quickAction('invest')" title="Investicije">
        <div class="action-icon"><i class="fas fa-chart-line"></i></div>
        <span>Ulaganje</span>
      </button>
      <button class="action-btn" onclick="quickAction('bills')" title="Plaƒáanje raƒçuna">
        <div class="action-icon"><i class="fas fa-file-invoice"></i></div>
        <span>Raƒçuni</span>
      </button>
    </div>

    <!-- PAYMENT SECTION -->
    <h3 style="margin-top:28px"><i class="fas fa-credit-card"></i> Izvr≈°i Plaƒáanje</h3>
    
    <div class="form-group">
      <label>Kategorija Plaƒáanja</label>
      <div class="payment-category-grid" id="paymentCategories">
        <button class="payment-category-btn active" onclick="selectPaymentCategory(event, 'grocery')">
          <i class="fas fa-shopping-cart"></i>
          <span>Kupovine</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'food')">
          <i class="fas fa-utensils"></i>
          <span>Hrana</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'transport')">
          <i class="fas fa-taxi"></i>
          <span>Prijevoz</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'entertainment')">
          <i class="fas fa-ticket-alt"></i>
          <span>Zabava</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'utilities')">
          <i class="fas fa-home"></i>
          <span>Komunalne</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'health')">
          <i class="fas fa-heartbeat"></i>
          <span>Zdravlje</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'education')">
          <i class="fas fa-graduation-cap"></i>
          <span>Edukacija</span>
        </button>
        <button class="payment-category-btn" onclick="selectPaymentCategory(event, 'travel')">
          <i class="fas fa-plane"></i>
          <span>Putovanja</span>
        </button>
<button class="payment-category-btn" onclick="selectPaymentCategory(event, 'subscriptions')">
  <i class="fas fa-sync"></i>
  <span>Pretplate</span>
</button>

<button class="payment-category-btn" onclick="selectPaymentCategory(event, 'donations')">
  <i class="fas fa-hand-holding-heart"></i>
  <span>Donacije</span>
</button>

      </div>
    </div>
    
    <div class="form-group">
      <label>Iznos</label>
      <input id="amount" type="number" placeholder="0.00" min="0" step="0.01" inputmode="decimal">
    </div>

    <div class="form-group">
      <label>Primatelj</label>
      <select id="recipient">
        <option>Odaberi primatelja...</option>
        <option>Marko Markoviƒá</option>
        <option>Ana Aniƒá</option>
        <option>Petar Petroviƒá</option>
        <option>Jelena Jeleniƒá</option>
        <option>Filip Filipoviƒá</option>
        <option>Novi primatelj...</option>
      </select>
    </div>

    <div class="button-row">
      <button class="btn btn-success" onclick="pay()"><i class="fas fa-check"></i> Plati sada</button>
      <button class="btn btn-danger" onclick="toggleFreeze()" id="freezeBtn"><i class="fas fa-lock"></i> Zamrzni</button>
    </div>

    <!-- CURRENCY RATES -->
    <div style="margin-top:28px;">
      <h3><i class="fas fa-exchange-alt"></i> Kursne Stope</h3>
      <div class="currency-list" id="currencyList"></div>
    </div>

    <!-- SETTINGS PANEL -->
    <div class="settings-panel">
      <h4><i class="fas fa-lock"></i> Brze Postavke Sigurnosti</h4>
      <div class="settings-item">
        <div class="settings-label">
          <strong>Biometrijska Autentifikacija</strong>
          <small>Face ID i Fingerprint</small>
        </div>
        <div class="toggle-switch active" onclick="toggleSetting(event, 'Biometrijska Autentifikacija', true)"></div>
      </div>
      <div class="settings-item">
        <div class="settings-label">
          <strong>2FA - Dvofaktorska Za≈°tita</strong>
          <small>SMS + aplikacija</small>
        </div>
        <div class="toggle-switch active" onclick="toggleSetting(event, '2FA za≈°tita', true)"></div>
      </div>
      <div class="settings-item">
        <div class="settings-label">
          <strong>Notifikacije za Transakcije</strong>
          <small>Push obavijesti</small>
        </div>
        <div class="toggle-switch active" onclick="toggleSetting(event, 'Notifikacije', true)"></div>
      </div>
      <div class="settings-item">
        <div class="settings-label">
          <strong>Dark Mode</strong>
          <small>Uvijek ukljuƒçeno</small>
        </div>
        <div class="toggle-switch active" onclick="toggleSetting(event, 'Dark Mode', true)"></div>
      </div>
    </div>

    <!-- TRANSACTIONS PREVIEW -->
    <div class="transactions-preview" id="transactionsPreview" style="display:none">
      <h4><i class="fas fa-list"></i> Nedavne Transakcije</h4>
      <div id="transactionsList"></div>
    </div>
  </div>

<div class="transactions-preview" style="display:block">
  <h4><i class="fas fa-clock"></i> Timeline Aktivnosti</h4>

  <div class="transaction-item">
    <div class="transaction-left">
      <div class="transaction-icon" style="background:rgba(34,211,238,.15)">
        <i class="fas fa-sign-in-alt"></i>
      </div>
      <div class="transaction-details">
        <strong>Prijava na sistem</strong>
        <span>Danas ‚Ä¢ 14:32</span>
      </div>
    </div>
    <div class="transaction-amount">OK</div>
  </div>

  <div class="transaction-item">
    <div class="transaction-left">
      <div class="transaction-icon" style="background:rgba(34,197,94,.15)">
        <i class="fas fa-credit-card"></i>
      </div>
      <div class="transaction-details">
        <strong>Plaƒáanje</strong>
        <span>‚Ç¨120 ‚Ä¢ Hrana</span>
      </div>
    </div>
    <div class="transaction-amount">‚àí‚Ç¨120</div>
  </div>

  <div class="transaction-item">
    <div class="transaction-left">
      <div class="transaction-icon" style="background:rgba(168,85,247,.15)">
        <i class="fas fa-cog"></i>
      </div>
      <div class="transaction-details">
        <strong>Promjena postavki</strong>
        <span>Sigurnost</span>
      </div>
    </div>
    <div class="transaction-amount">‚úî</div>
  </div>
</div>


  <!-- SPEND CHART -->
  <div class="card">
    <h3><i class="fas fa-chart-area"></i> Tok potro≈°nje</h3>
    <p class="sub">Dinamika va≈°ih transakcija tokom sesije</p>
    <div class="chart-container">
      <canvas id="spendChart"></canvas>
    </div>
    <div class="chart-label"><i class="fas fa-lightbulb"></i> Grafikon akumulirane potro≈°nje u realnom vremenu</div>
  </div>
</div>

<!-- RIGHT SIDE - RISK & AI -->
<div style="display:grid;gap:28px">

  <!-- RISK SECTION -->
  <div class="card">
    <h3><i class="fas fa-shield-alt"></i> Analiza sigurnosnog statusa</h3>
    <p class="sub">Real-time procjena rizika i sigurnosti raƒçuna</p>
    
    <div class="risk-wrap">
      <div class="risk-chart-container">
        <div id="riskRing" class="risk-ring"></div>
        <canvas id="riskChart"></canvas>
        <div class="risk-value">
          <strong id="riskValue">32</strong>
          <span style="font-size:24px;opacity:.6">%</span>
        </div>
      </div>
      <div id="riskTip" class="risk-tooltip"></div>
      <div id="riskText" class="risk-text"></div>
    </div>

    <div class="risk-analysis">
      <div class="risk-analysis-item">
        <div class="risk-analysis-label">Autentifikacija</div>
        <div class="risk-analysis-meter">
          <div class="risk-analysis-bar" style="background: linear-gradient(90deg, #22d3ee, #0ea5e9); width: 95%;"></div>
        </div>
        <div class="risk-analysis-value">95%</div>
      </div>
      <div class="risk-analysis-item">
        <div class="risk-analysis-label">Aktivnost Raƒçuna</div>
        <div class="risk-analysis-meter">
          <div class="risk-analysis-bar" style="background: linear-gradient(90deg, #34d399, #10b981); width: 78%;"></div>
        </div>
        <div class="risk-analysis-value">78%</div>
      </div>
      <div class="risk-analysis-item">
        <div class="risk-analysis-label">Transakcije</div>
        <div class="risk-analysis-meter">
          <div class="risk-analysis-bar" style="background: linear-gradient(90deg, #fbbf24, #f59e0b); width: 62%;"></div>
        </div>
        <div class="risk-analysis-value">62%</div>
      </div>
      <div class="risk-analysis-item">
        <div class="risk-analysis-label">Enkriptovani Promet</div>
        <div class="risk-analysis-meter">
          <div class="risk-analysis-bar" style="background: linear-gradient(90deg, #a78bfa, #8b5cf6); width: 100%;"></div>
        </div>
        <div class="risk-analysis-value">100%</div>
      </div>
      <div class="risk-analysis-item">
        <div class="risk-analysis-label">Anomalije</div>
        <div class="risk-analysis-meter">
          <div class="risk-analysis-bar" style="background: linear-gradient(90deg, #34d399, #10b981); width: 5%;"></div>
        </div>
        <div class="risk-analysis-value">5%</div>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-box">
        <strong id="transactionCount">0</strong>
        Transakcija
      </div>
      <div class="stat-box">
        <strong id="totalSpent">‚Ç¨0.00</strong>
        Ukupno
      </div>
    </div>
  </div>

  <!-- CATEGORY CHART -->
  <div class="card">
    <h3><i class="fas fa-pie-chart"></i> Analiza tro≈°enja po kategorijama</h3>
    <p class="sub" style="color:#e5e7eb;">Raspodjela va≈°ih izdataka na osnovu tipa plaƒáanja</p>
    
    <div class="category-controls">
      <button class="category-filter active" onclick="filterCategory('all')">Sve</button>
      <button class="category-filter" onclick="filterCategory('food')">Hrana</button>
      <button class="category-filter" onclick="filterCategory('transport')">Prijevoz</button>
      <button class="category-filter" onclick="filterCategory('entertainment')">Zabava</button>
      <button class="category-filter" onclick="filterCategory('other')">Ostalo</button>
    </div>
    
    <div class="chart-container">
      <canvas id="categoryChart"></canvas>
    </div>

    <div class="category-stats">
      <div class="category-stat">
        <div class="category-stat-icon"><i class="fas fa-utensils"></i></div>
        <div class="category-stat-name">Hrana</div>
        <div class="category-stat-value" id="cat-food">‚Ç¨0</div>
      </div>
      <div class="category-stat">
        <div class="category-stat-icon"><i class="fas fa-taxi"></i></div>
        <div class="category-stat-name">Prijevoz</div>
        <div class="category-stat-value" id="cat-transport">‚Ç¨0</div>
      </div>
      <div class="category-stat">
        <div class="category-stat-icon"><i class="fas fa-ticket-alt"></i></div>
        <div class="category-stat-name">Zabava</div>
        <div class="category-stat-value" id="cat-entertainment">‚Ç¨0</div>
      </div>
      <div class="category-stat">
        <div class="category-stat-icon"><i class="fas fa-shopping-bag"></i></div>
        <div class="category-stat-name">Ostalo</div>
        <div class="category-stat-value" id="cat-other">‚Ç¨0</div>
      </div>
      <div class="category-stat">
        <div class="category-stat-icon"><i class="fas fa-graduation-cap"></i></div>
        <div class="category-stat-name">Edukacija</div>
        <div class="category-stat-value" id="cat-education">‚Ç¨0</div>
      </div>
      <div class="category-stat">
        <div class="category-stat-icon"><i class="fas fa-plane"></i></div>
        <div class="category-stat-name">Putovanja</div>
        <div class="category-stat-value" id="cat-travel">‚Ç¨0</div>
      </div>
    </div>

    <div class="chart-label"><i class="fas fa-chart-bar"></i> Detaljan pregled razliƒçitih tipova transakcija</div>
  </div>

  <!-- AI CHAT -->
  <div class="card chat">
    <div class="chat-header">
      <h3><i class="fas fa-robot"></i> AI Asistent</h3>
      <p class="sub">Postavi pitanje o svojem raƒçunu</p>
    </div>
    <div id="chatLog" class="chat-log">
      <div class="msg bot">Zdravo! üëã Ja sam tvoj financijski asistent. Tu sam da te pomognem sa bilo ƒçim vezano uz tvoj raƒçun!</div>
    </div>
    <div class="chat-input-wrap">
      <input id="chatInput" type="text" placeholder="Postavi pitanje‚Ä¶" onkeydown="if(event.key==='Enter')askAI()">
      <button class="btn btn-primary" onclick="askAI()"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>
</div>

</div>

</div>

<!-- HOME PAGE -->
<div id="homePage" class="page-content" style="display:none;">

<div class="home-container">
  
  <!-- CARD 1: Brze Akcije -->
  <div class="home-card" onclick="switchPage('dashboard'); quickAction('transfer')">
    <div class="home-card-icon"><i class="fas fa-paper-plane"></i></div>
    <h4>Brz Prenos</h4>
    <p>Po≈°alji novac prijateljima i porodici</p>
  </div>

  <!-- CARD 2: Investicije -->
  <div class="home-card" onclick="switchPage('dashboard'); quickAction('invest')">
    <div class="home-card-icon"><i class="fas fa-chart-line"></i></div>
    <h4>Investicije</h4>
    <p>Ulagaj u fondove sa minimalnim naknadama</p>
  </div>

  <!-- CARD 3: ≈†tednja -->
  <div class="home-card" onclick="showNotification('success', 'üí∞ ≈†tedni plan pokrenut - Postavi meseƒçnu ≈°tednju')">
    <div class="home-card-icon"><i class="fas fa-piggy-bank"></i></div>
    <h4>≈†tednja</h4>
    <p>Automatski ≈°tedi deo svojih primanja</p>
  </div>

  <!-- CARD 4: Krediti -->
  <div class="home-card" onclick="showNotification('success', 'üìä Dostupan kreditor sa dobrih 3.5% - Primeni!')">
    <div class="home-card-icon"><i class="fas fa-handshake"></i></div>
    <h4>Krediti</h4>
    <p>Brz pristup kreditorima sa malim kamatama</p>
  </div>

  <!-- CARD 5: Osiguranje -->
  <div class="home-card" onclick="showNotification('success', 'üõ°Ô∏è Osiguranje raƒçuna je aktivirano - Za≈°tita do ‚Ç¨100k')">
    <div class="home-card-icon"><i class="fas fa-shield-alt"></i></div>
    <h4>Osiguranje</h4>
    <p>Za≈°titi svojih novac od rizika</p>
  </div>

  <!-- CARD 6: Cashback -->
  <div class="home-card" onclick="showNotification('success', 'üí≥ Zaradio si ‚Ç¨45.50 cashback-a - Treba≈° vi≈°e?')">
    <div class="home-card-icon"><i class="fas fa-gift"></i></div>
    <h4>Cashback Program</h4>
    <p>Zaradite od 0.5% do 5% na svaki kupac</p>
  </div>

  <!-- CARD 7: Kartice -->
  <div class="home-card" onclick="showNotification('success', 'üí≥ Dostupne su Virtualne, Fiziƒçke i Premium kartice')">
    <div class="home-card-icon"><i class="fas fa-credit-card"></i></div>
    <h4>Dodatne Kartice</h4>
    <p>Kreiraj dodatne kartice za porodicu</p>
  </div>

  <!-- CARD 8: Valute -->
  <div class="home-card" onclick="showNotification('success', 'üí± Razmjenite valute sa boljim kursevima nego konkurencija')">
    <div class="home-card-icon"><i class="fas fa-exchange-alt"></i></div>
    <h4>Multi-valuta</h4>
    <p>Upravljajte vi≈°e valuta istovremeno</p>
  </div>

  <!-- CARD 9: Plaƒáanja -->
  <div class="home-card" onclick="switchPage('dashboard'); quickAction('bills')">
    <div class="home-card-icon"><i class="fas fa-file-invoice"></i></div>
    <h4>Plaƒáanja Raƒçuna</h4>
    <p>Plati sve svoje raƒçune na jednom mjestu</p>
  </div>

  <!-- CARD 10: Fiziƒçka Lokacija -->
  <div class="home-card" onclick="showNotification('success', 'üìç Prona≈°li smo 45 Bankomata u va≈°oj blizini')">
    <div class="home-card-icon"><i class="fas fa-map-marker-alt"></i></div>
    <h4>Nalazi Bankomata</h4>
    <p>Pronaƒëi najbli≈æi bankomat ili ogradu</p>
  </div>

  <!-- CARD 11: Podr≈°ka -->
  <div class="home-card" onclick="showNotification('success', 'üìû Tim podr≈°ke je dostupan 24/7 - Kontaktiraj nas!')">
    <div class="home-card-icon"><i class="fas fa-headset"></i></div>
    <h4>24/7 Podr≈°ka</h4>
    <p>Govor sa struƒçnjakom savetnicima</p>
  </div>

  <!-- CARD 12: Sigurnost -->
  <div class="home-card" onclick="openSettings()">
    <div class="home-card-icon"><i class="fas fa-lock"></i></div>
    <h4>Sigurnosni Centar</h4>
    <p>Upravljaj svim sigurnosnim postavkama</p>
  </div>
</div>

</div>

<!-- SETTINGS MODAL -->
<div id="settingsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2><i class="fas fa-cog" style="color:#22d3ee;margin-right:10px;"></i> Sve Postavke</h2>
      <button class="modal-close" onclick="closeSettings()"><i class="fas fa-times"></i></button>
    </div>
    <div style="max-height:600px;overflow-y:auto;">
      <!-- SIGURNOST -->
      <div class="settings-card">
        <h4><i class="fas fa-lock"></i> Sigurnost</h4>
        <div class="settings-card-list">
          <div class="settings-card-item">
            <span>Biometrijska Autentifikacija</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Biometrijska autentifikacija')"></div>
          </div>
          <div class="settings-card-item">
            <span>2FA - Dvofaktorska Za≈°tita</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, '2FA za≈°tita')"></div>
          </div>
          <div class="settings-card-item">
            <span>Pitanja za Sigurnost</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Pitanja za sigurnost')"></div>
          </div>
          <div class="settings-card-item">
            <span>Notifikacije o Poku≈°ajima</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Notifikacije o poku≈°ajima')"></div>
          </div>
        </div>
      </div>

      <!-- NOTIFIKACIJE -->
      <div class="settings-card">
        <h4><i class="fas fa-bell"></i> Notifikacije</h4>
        <div class="settings-card-list">
          <div class="settings-card-item">
            <span>Obavijest Transakcija</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Obavijest transakcija')"></div>
          </div>
          <div class="settings-card-item">
            <span>Sigurnosne Obavijesti</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Sigurnosne obavijesti')"></div>
          </div>
          <div class="settings-card-item">
            <span>Obavijest o Novim Uslugama</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Obavijest o novim uslugama')"></div>
          </div>
          <div class="settings-card-item">
            <span>Email Obavijesti</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Email obavijesti')"></div>
          </div>
        </div>
      </div>

      <!-- PRIVATNOST -->
      <div class="settings-card">
        <h4><i class="fas fa-user-secret"></i> Privatnost</h4>
        <div class="settings-card-list">
          <div class="settings-card-item">
            <span>Djeljenje Podataka</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Djeljenje podataka')"></div>
          </div>
          <div class="settings-card-item">
            <span>Analitika i Praƒáenje</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Analitika i praƒáenje')"></div>
          </div>
          <div class="settings-card-item">
            <span>Marketin≈°ke Obavijesti</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Marketin≈°ke obavijesti')"></div>
          </div>
          <div class="settings-card-item">
            <span>Kolaƒçiƒái Treƒáih Strana</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Kolaƒçiƒái treƒáih strana')"></div>
          </div>
        </div>
      </div>

      <!-- PRIKAZ -->
      <div class="settings-card">
        <h4><i class="fas fa-palette"></i> Prikaz</h4>
        <div class="settings-card-list">
          <div class="settings-card-item">
            <span>Dark Mode</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Dark mode')"></div>
          </div>
          <div class="settings-card-item">
            <span>Kompaktan Pregled</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Kompaktan pregled')"></div>
          </div>
          <div class="settings-card-item">
            <span>Animacije</span>
            <div class="toggle-switch active" onclick="toggleModalSetting(event, 'Animacije')"></div>
          </div>
          <div class="settings-card-item">
            <span>Velika Slova</span>
            <div class="toggle-switch" onclick="toggleModalSetting(event, 'Velika slova')"></div>
          </div>
        </div>
      </div>

      <!-- PLAƒÜANJA -->
      <div class="settings-card">
        <h4><i class="fas fa-credit-card"></i> Plaƒáanja</h4>
        <div class="settings-card-list">
          <div class="settings-card-item">
            <span>Dnevni Limit</span>
            <select class="settings-select" id="dailyLimitSelect" onchange="setDailyLimit(this.value)">
              <option value="5000">‚Ç¨5,000</option>
              <option value="10000" selected>‚Ç¨10,000</option>
              <option value="20000">‚Ç¨20,000</option>
              <option value="unlimited">Bez limitacije</option>
            </select>
          </div>
          <div class="settings-card-item">
            <span>Mjeseƒçni Limit</span>
            <select class="settings-select" id="monthlyLimitSelect" onchange="setMonthlyLimit(this.value)">
              <option value="50000">‚Ç¨50,000</option>
              <option value="100000" selected>‚Ç¨100,000</option>
              <option value="200000">‚Ç¨200,000</option>
              <option value="unlimited">Bez limitacije</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function startDemoTour() {
  const steps = [
    "#headerBalanceStat",
    ".bank-card",
    ".balance-section",
    ".quick-actions",
    "#riskChart"
  ]

  steps.forEach((sel, i) => {
    setTimeout(() => {
      document.querySelector(sel)?.classList.add("highlight")
    }, i * 1200)
  })
}

const RATE_BAM = 1.95583
const RATE_USD = 0.92

const clockEl = document.getElementById("clockTime")
const balanceEl = document.getElementById("balance")
const currencyEl = document.getElementById("currency")
const amountEl = document.getElementById("amount")
const cardStatusEl = document.getElementById("cardStatus")
const bankCardEl = document.querySelector(".bank-card")
const riskRing = document.getElementById("riskRing")
const riskTip = document.getElementById("riskTip")
const freezeBtn = document.getElementById("freezeBtn")
const recipientEl = document.getElementById("recipient")
const settingsModal = document.getElementById("settingsModal")

// Set user name
// Umjesto randomName, pitaj korisnika
const randomName = prompt("Unesite va≈°e ime:") || "Korisniƒçe"

// Postavi ime u header i karticu
document.getElementById("userName").textContent = randomName
document.getElementById("userInitials").textContent =
  randomName.charAt(0) + randomName.charAt(randomName.length - 1)
document.getElementById("cardName").textContent =
  randomName.toUpperCase() + " DOE"

let state = {
  balanceEUR: 2340,
  risk: 32,
  frozen: false,
  spendHistory: [0],
  transactions: [],
  categories: {food: 0, transport: 0, entertainment: 0, other: 0, education: 0, travel: 0},
  categoryFilter: "all",
  selectedPaymentCategory: "grocery",
  transactionHistory: [],
  dailyLimit: "‚Ç¨10,000",
  monthlyLimit: "‚Ç¨100,000",
  settings: {
    biometric: true,
    twofa: true,
    notifications: true,
    darkmode: true,
    compactView: false,
    animations: true,
    largeText: false,
    dataSharing: false,
    analytics: false,
    marketing: false,
    thirdPartyCookies: false
  }
}

const paymentCategories = {
  grocery: "Kupovine",
  food: "Hrana",
  transport: "Prijevoz",
  entertainment: "Zabava",
  utilities: "Komunalne",
  health: "Zdravlje",
  education: "Edukacija",
  travel: "Putovanja"
}

const currencyRates = [
  { code: "EUR", name: "Euro", rate: 1.00, symbol: "‚Ç¨" },
  { code: "BAM", name: "Konvertibilna marka", rate: RATE_BAM, symbol: "KM" },
  { code: "USD", name: "Ameriƒçki dolar", rate: RATE_USD, symbol: "$" },
  { code: "GBP", name: "Britanske funte", rate: 1.17, symbol: "¬£" },
  { code: "CHF", name: "≈†vajcarski franak", rate: 1.03, symbol: "CHF" },
  { code: "JPY", name: "Japanski jen", rate: 155.80, symbol: "¬•" }
]

const randomAIResponses = [
  "Dobrodo≈°ao u Fintech Nova Premium Bankarstvo!",
  "Sigurno, sve je u redu!",
  "Izvje≈°tavam... - nema sumnjive aktivnosti.",
  "Karticu kontrolira≈° kao profesionalac! ",
  "Status je optimalan, nastavi dalje! ",
  "Sve je pod kontrolom. Bravo!",
  "Nema upozorenja na mom radaru.",
  "Tvoj raƒçun je sigurniji nego Fort Knox!",
  "Sistem je detektovao samo normalne aktivnosti.",
  "Finansijska stabilnost na najvi≈°em nivou!",
  "Sve transakcije su autentiƒçne i bezbjedne!"
]

const notificationMessages = {
  pay_success: "Plaƒáanje uspje≈°no! Sredstva prenesena.",
  pay_failed: "Plaƒáanje nije moguƒáe! Nedovoljno sredstava.",
  pay_frozen: "Kartica je zamrznuta! Aktiviraj je prvo.",
  freeze_on: "Kartica je zamrznuta zbog sigurnosti.",
  freeze_off: "Kartica je aktivirana i spremna za upotrebu.",
  risk_warning: "Rizik se poveƒáao! Budite oprezniji sa tro≈°enjem.",
  risk_high: "Visok rizik detektovan! Razmotrite zamrzavanje.",
  currency_change: "Valuta promijenjena na"
}

const featureMessages = {
  transfer: "Prijenos sredstava - Slanje novca je olak≈°ano!",
  request: "Zahtjev plaƒáanja je posl√°n kontaktu.",
  invest: "Otvoren investicijski portal sa boljim prinosima.",
  bills: "pregled svih raƒçuna - Automatski plaƒáaj raƒçune."
}

const alerts = [
  "Dobrodo≈°ao u Fintech Nova - Sigurna finansijska rje≈°enja!",
  "Za sva pitanja stojimo ti na raspolaganju 24/7.",
  "Savjet: Postavi limit transakcija za dodatnu sigurnost.",
  "Bonus: Otvori raƒçun i dobij ‚Ç¨5 cashback.",
  "Upozorenje: Provjeri privatnost svojih podataka.",
  "Novi premium feature: Investicije sa 0% naknada!"
]

let alertIndex = 0

/* SWITCH PAGE */

function switchPage(page) {
  document.querySelectorAll('.page-content').forEach(p => {
    p.classList.remove('active');
    p.style.display = 'none';
  });

  const target = page === 'dashboard'
    ? document.getElementById('dashboardPage')
    : document.getElementById('homePage');

  target.classList.add('active');
  target.style.display = 'block';

  document.querySelectorAll('.nav-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.page === page);
  });
}

/* CURRENCY LIST INITIALIZATION */
function initCurrencyList() {
  const list = document.getElementById("currencyList")
  list.innerHTML = ""
  currencyRates.forEach(curr => {
    const item = document.createElement("div")
    item.className = "currency-item"
    item.innerHTML = `
      <div>
        <strong>${curr.code}</strong> - ${curr.name}
      </div>
      <div>${curr.symbol} ${curr.rate.toFixed(2)}</div>
    `
    list.appendChild(item)
  })
}

function updateTopAlert(){
  document.getElementById("topAlertText").textContent = alerts[alertIndex % alerts.length]
  alertIndex++
}

setInterval(updateTopAlert, 8000)

/* NOTIFICATION SYSTEM */
function showNotification(type, message, duration = 3500) {
  const notif = document.createElement("div")
  notif.className = `notification ${type}`
  notif.innerHTML = message
  document.body.appendChild(notif)
  
  setTimeout(() => {
    notif.style.animation = "slideOut .3s ease-out forwards"
    setTimeout(() => notif.remove(), 300)
  }, duration)
}

/* CLOCK */
function updateClock() {
  const now = new Date()
  const hours = String(now.getHours()).padStart(2, '0')
  const minutes = String(now.getMinutes()).padStart(2, '0')
  const seconds = String(now.getSeconds()).padStart(2, '0')
  clockEl.textContent = `${hours}:${minutes}:${seconds}`
}

updateClock()
setInterval(updateClock, 1000)

/* CHART GRADIENT HELPER */
function makeGradient(ctx, c1, c2){
  const g = ctx.createLinearGradient(0, 0, 0, 250)
  g.addColorStop(0, c1)
  g.addColorStop(1, c2)
  return g
}

/* SPEND CHART */
const spendCtx = document.getElementById("spendChart").getContext("2d")

const spendChartInstance = new Chart(spendCtx, {
  type: "line",
  data: {
    labels: [""],
    datasets: [{
      data: [0],

      fill: true,
      tension: 0.45,

      backgroundColor: makeGradient(
        spendCtx,
        "rgba(34,211,238,.18)",
        "rgba(34,211,238,.01)"
      ),

      borderColor: "#22d3ee",
      borderWidth: 2,

      pointRadius: 0,                 // üëà KLJUƒåNO
      pointHoverRadius: 6,
      pointHitRadius: 12,

      pointBackgroundColor: "#22d3ee",
      pointBorderWidth: 0,

      segment: {
        borderColor: ctx =>
          ctx.p1DataIndex > 0
            ? "#22d3ee"
            : "rgba(34,211,238,.4)"
      }
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,

    interaction: {
      mode: "index",
      intersect: false
    },

    plugins: {
      legend: { display: false },

      tooltip: {
        backgroundColor: "rgba(2,8,23,.95)",
        borderColor: "rgba(34,211,238,.35)",
        borderWidth: 1,
        padding: 12,
        displayColors: false,
        titleColor: "#22d3ee",
        bodyColor: "#e5e7eb",

        titleFont: { size: 13, weight: "600" },
        bodyFont: { size: 12 }
      }
    },

    scales: {
      x: {
        display: false
      },
      y: {
        beginAtZero: true,

        grid: {
          color: "rgba(255,255,255,.04)",
          drawBorder: false
        },

        ticks: {
          maxTicksLimit: 5,
          padding: 8,
          callback: v => `‚Ç¨${v}`,
          font: { size: 11 },
          color: "rgba(226,232,240,.55)"
        }
      }
    }
  }
})


/* CATEGORY CHART */
const categoryCtx = document.getElementById("categoryChart").getContext("2d")
const categoryChartInstance = new Chart(categoryCtx, {
  type: "bar",
  data: {
    labels: [" Hrana", " Prijevoz", " Zabava", " Ostalo", " Edukacija", " Putovanja"],
    datasets: [{
      label: "Potro≈°nja po kategoriji",
      data: [0, 0, 0, 0, 0, 0],
      backgroundColor: [
        "rgba(34,211,238,.7)",
        "rgba(34,197,94,.7)",
        "rgba(168,85,247,.7)",
        "rgba(250,204,21,.7)",
        "rgba(236,72,153,.7)",
        "rgba(59,130,246,.7)"
      ],
      borderColor: [
        "#22d3ee",
        "#22c55e",
        "#a855f7",
        "#facc15",
        "#ec4899",
        "#3b82f6"
      ],
      borderWidth: 2,
      borderRadius: 10,
      barPercentage: 0.8,
      categoryPercentage: 0.9
    }]
  },
  options: {
    indexAxis: "y",
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        display: true,
        position: "bottom",
        labels: {
          color: "rgba(229,231,235,.8)",
          font: {size: 12},
          padding: 14,
          usePointStyle: true,
          boxWidth: 6
        }
      },
      tooltip: {
        backgroundColor: "rgba(0,0,0,.85)",
        bodyColor: "#e5e7eb",
        borderColor: "rgba(34,211,238,.4)",
        borderWidth: 1.5,
        padding: 12,
        displayColors: true,
        callbacks: {
          label: (ctx) => ` ‚Ç¨${ctx.parsed.x.toFixed(2)}`
        }
      }
    },
    scales: {
      x: {
        display: true,
        grid: {color: "rgba(34,211,238,.08)", drawBorder: false},
        ticks: {color: "rgba(229,231,235,.5)", font: {size: 11}},
        beginAtZero: true
      },
      y: {
        grid: {display: false},
        ticks: {color: "rgba(229,231,235,.7)", font: {size: 12, weight: "500"}}
      }
    }
  }
})

/* RISK CHART */
const riskCtx = document.getElementById("riskChart").getContext("2d")
const riskChartInstance = new Chart(riskCtx, {
  type: "doughnut",
  data: {
    datasets: [{
      data: [68, 32],
      backgroundColor: [
        makeGradient(riskCtx, "rgba(34,211,238,.8)", "rgba(14,165,233,.5)"),
        makeGradient(riskCtx, "rgba(239,68,68,.8)", "rgba(153,27,27,.5)")
      ],
      borderColor: "rgba(11,14,20,.8)",
      borderWidth: 2.5,
      spacing: 2
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    cutout: "75%",
    plugins: {
      legend: {display: false},
      tooltip: {
        backgroundColor: "rgba(0,0,0,.85)",
        bodyColor: "#e5e7eb",
        borderColor: "rgba(34,211,238,.4)",
        borderWidth: 1.5,
        padding: 10,
        titleFont: {size: 12}
      }
    }
  }
})

/* UPDATE RISK UI */
function updateRiskUI(){
  riskChartInstance.data.datasets[0].data = [100 - state.risk, state.risk]
  riskChartInstance.update()

  const riskPercentage = Math.round(state.risk)
  document.getElementById("riskValue").textContent = riskPercentage

  let riskLabel, glow, msg
  if (state.risk < 50) {
    riskLabel = "Nizak rizik - Sve je sigurno "
    glow = "radial-gradient(circle, rgba(34,211,238,.5), transparent 65%)"
    msg = "Tvoj raƒçun je u odliƒçnom sigurnosnom stanju"
  } else if (state.risk < 80) {
    riskLabel = "Srednji rizik - Budi oprezniji"
    glow = "radial-gradient(circle, rgba(250,204,21,.5), transparent 65%)"
    msg = "Detektovan poveƒáan rizik - preporuka je smanjenje transakcija"
  } else {
    riskLabel = "Visok rizik - Nemedljeno dejstvo!"
    glow = "radial-gradient(circle, rgba(239,68,68,.6), transparent 65%)"
    msg = "Visok rizik ‚Äì odmah zamrzni karticu i kontaktiraj podr≈°ku"
  }

  document.getElementById("riskText").textContent = riskLabel
  riskRing.style.background = glow
  riskTip.textContent = msg
  riskRing.classList.toggle("danger", state.risk >= 80)

  document.getElementById("transactionCount").textContent = state.transactions.length
  const totalSpent = state.transactions.reduce((a, b) => a + b, 0)
  const currSymbol = currencyEl.value === "EUR" ? "‚Ç¨" : currencyEl.value === "BAM" ? "KM" : "$"
  document.getElementById("totalSpent").textContent = currSymbol + totalSpent.toFixed(2)

  document.getElementById("headerRisk").textContent = riskPercentage + "%"
  
  updateTransactionsPreview()
}

/* UPDATE TRANSACTIONS PREVIEW */
function updateTransactionsPreview(){
  const preview = document.getElementById("transactionsPreview")
  const list = document.getElementById("transactionsList")
  
  if (state.transactionHistory.length === 0) {
    preview.style.display = "none"
    return
  }
  
  preview.style.display = "block"
  list.innerHTML = ""
  
  const categoryIcons = {
    grocery: "fa-shopping-cart",
    food: "fa-utensils",
    transport: "fa-taxi",
    entertainment: "fa-ticket-alt",
    utilities: "fa-home",
    health: "fa-heartbeat",
    education: "fa-graduation-cap",
    travel: "fa-plane"
  }
  
  const currSymbol = currencyEl.value === "EUR" ? "‚Ç¨" : currencyEl.value === "BAM" ? "KM" : "$"
  
  state.transactionHistory.slice(-5).reverse().forEach((transaction) => {
    const iconClass = categoryIcons[transaction.category] || "fa-money-bill"
    const item = document.createElement("div")
    item.className = "transaction-item"
    item.innerHTML = `
      <div class="transaction-left">
        <div class="transaction-icon" style="background:rgba(34,211,238,.15);color:#22d3ee">
          <i class="fas ${iconClass}"></i>
        </div>
        <div class="transaction-details">
          <strong>${transaction.recipient}</strong>
          <span>Prije nekoliko trenutaka</span>
        </div>
      </div>
      <div class="transaction-amount">-${currSymbol}${transaction.amount.toFixed(2)}</div>
    `
    list.appendChild(item)
  })
}

/* UPDATE CATEGORY STATS */
function updateCategoryChart(){
  const categories = state.categories
  
  categoryChartInstance.data.datasets[0].data = [
    categories.food,
    categories.transport,
    categories.entertainment,
    categories.other,
    categories.education,
    categories.travel
  ]
  categoryChartInstance.update()

  const currSymbol = currencyEl.value === "EUR" ? "‚Ç¨" : currencyEl.value === "BAM" ? "KM" : "$"
  document.getElementById("cat-food").textContent = currSymbol + categories.food.toFixed(2)
  document.getElementById("cat-transport").textContent = currSymbol + categories.transport.toFixed(2)
  document.getElementById("cat-entertainment").textContent = currSymbol + categories.entertainment.toFixed(2)
  document.getElementById("cat-other").textContent = currSymbol + categories.other.toFixed(2)
  document.getElementById("cat-education").textContent = currSymbol + categories.education.toFixed(2)
  document.getElementById("cat-travel").textContent = currSymbol + categories.travel.toFixed(2)
}

/* FILTER CATEGORY */
function filterCategory(cat){
  state.categoryFilter = cat
  const buttons = document.querySelectorAll(".category-filter")
  buttons.forEach(btn => btn.classList.remove("active"))
  event.target.classList.add("active")
  const catNames = {all: "svim kategorijama", food: "hrani", transport: "prijevozu", entertainment: "zabavi", other: "ostalom"}
  showNotification("success", `üìä Filtriranje po ${catNames[cat]}`)
}

/* SELECT PAYMENT CATEGORY */
function selectPaymentCategory(e, category) {
  document.querySelectorAll(".payment-category-btn").forEach(btn => btn.classList.remove("active"))
  e.target.closest(".payment-category-btn").classList.add("active")
  state.selectedPaymentCategory = category
}

/* MAIN RENDER FUNCTION */
function render(){
  let value, rate, currSymbol
  
  if (currencyEl.value === "EUR") {
    value = state.balanceEUR
    currSymbol = "‚Ç¨"
  } else if (currencyEl.value === "BAM") {
    value = state.balanceEUR * RATE_BAM
    currSymbol = "KM"
  } else {
    value = state.balanceEUR * RATE_USD
    currSymbol = "$"
  }

  balanceEl.textContent = value.toFixed(2)
  document.getElementById("symbol").textContent = currSymbol
  document.getElementById("headerBalance").textContent = currSymbol + value.toFixed(0)

  updateRiskUI()
  updateCategoryChart()
}

/* PAY FUNCTION */
function pay(){
  const amount = parseFloat(amountEl.value)
  const recipient = recipientEl.value
  
  if (!amount || amount <= 0) {
    showNotification("danger", "Unesite ispravan iznos!")
    return
  }

  if (recipient === "Odaberi primatelja..." || recipient === "Novi primatelj...") {
    showNotification("danger", "Molimo odaberite primatelja!")
    return
  }
  
  if (state.frozen) {
    showNotification("danger", notificationMessages.pay_frozen)
    return
  }

  let eurAmount
  if (currencyEl.value === "EUR") {
    eurAmount = amount
  } else if (currencyEl.value === "BAM") {
    eurAmount = amount / RATE_BAM
  } else {
    eurAmount = amount / RATE_USD
  }
  
  if (eurAmount > state.balanceEUR) {
    showNotification("danger", notificationMessages.pay_failed)
    return
  }

  balanceEl.classList.remove("balance-flash")
  void balanceEl.offsetWidth
  balanceEl.classList.add("balance-flash")

  state.balanceEUR -= eurAmount
  state.risk = Math.min(95, state.risk + amount / 100)
  state.transactions.push(amount)

  // Add to transaction history
  state.transactionHistory.push({
    amount: amount,
    recipient: recipient,
    category: state.selectedPaymentCategory,
    timestamp: new Date()
  })

  const categoryMap = {
    grocery: "other",
    food: "food",
    transport: "transport",
    entertainment: "entertainment",
    utilities: "other",
    health: "other",
    education: "education",
    travel: "travel"
  }
  const mappedCat = categoryMap[state.selectedPaymentCategory]
  state.categories[mappedCat] += amount

  state.spendHistory.push(state.spendHistory.at(-1) + amount)
  if (state.spendHistory.length > 30) {
    state.spendHistory.shift()
    spendChartInstance.data.labels.shift()
    spendChartInstance.data.datasets[0].data.shift()
  }

  spendChartInstance.data.labels.push("")
  spendChartInstance.data.datasets[0].data.push(state.spendHistory.at(-1))
  spendChartInstance.update()

  showNotification("success", notificationMessages.pay_success)
  
  if (state.risk >= 80) {
    setTimeout(() => showNotification("danger", notificationMessages.risk_high, 4000), 1500)
  } else if (state.risk >= 60) {
    setTimeout(() => showNotification("warning", notificationMessages.risk_warning, 4000), 1500)
  }

  amountEl.value = ""
  recipientEl.value = "Odaberite primatelja"
  render()
}

/* TOGGLE FREEZE FUNCTION */
function toggleFreeze(){
  state.frozen = !state.frozen
  cardStatusEl.textContent = state.frozen ? "Zamrznuta" : "Aktivna"
  cardStatusEl.className = "status " + (state.frozen ? "frozen" : "active")
  bankCardEl.classList.toggle("frozen", state.frozen)
  freezeBtn.innerHTML = state.frozen ? '<i class="fas fa-lock-open"></i> Odmrzni' : '<i class="fas fa-lock"></i> Zamrzni'
  freezeBtn.classList.toggle("btn-success", !state.frozen)
  freezeBtn.classList.toggle("btn-danger", state.frozen)
  
  const message = state.frozen ? notificationMessages.freeze_on : notificationMessages.freeze_off
  const type = state.frozen ? "danger" : "success"
  showNotification(type, message)
}

/* QUICK ACTIONS */
function quickAction(action){
  const btn = event.target.closest(".action-btn") || event.currentTarget
  if (btn.classList) {
    btn.classList.add("active")
    showNotification("success", featureMessages[action])
    setTimeout(() => btn.classList.remove("active"), 1500)
  }
}

/* SETTINGS MODAL */
function openSettings(){
  settingsModal.classList.add("active")
}

function closeSettings(){
  settingsModal.classList.remove("active")
}

function toggleModalSetting(e, label){
  e.currentTarget.classList.toggle("active")
  const isActive = e.currentTarget.classList.contains("active")
  
  // Update state
  const settingsMap = {
    'Biometrijska autentifikacija': 'biometric',
    '2FA za≈°tita': 'twofa',
    'Pitanja za sigurnost': 'securityQuestions',
    'Notifikacije o poku≈°ajima': 'attemptNotifications',
    'Obavijest transakcija': 'transactionNotifications',
    'Sigurnosne obavijesti': 'securityNotifications',
    'Obavijest o novim uslugama': 'newServiceNotifications',
    'Email obavijesti': 'emailNotifications',
    'Djeljenje podataka': 'dataSharing',
    'Analitika i praƒáenje': 'analytics',
    'Marketin≈°ke obavijesti': 'marketing',
    'Kolaƒçiƒái treƒáih strana': 'thirdPartyCookies',
    'Dark mode': 'darkmode',
    'Kompaktan pregled': 'compactView',
    'Animacije': 'animations',
    'Velika slova': 'largeText'
  }
  
  const settingKey = settingsMap[label]
  if (settingKey) {
    state.settings[settingKey] = isActive
  }
  
  showNotification("success", `${isActive ? "‚úÖ" : "‚ùå"} ${label} je ${isActive ? "aktivirana" : "deaktivirana"}`)
}

function setDailyLimit(value) {
  const displayValues = {
    '5000': '‚Ç¨5,000',
    '10000': '‚Ç¨10,000',
    '20000': '‚Ç¨20,000',
    'unlimited': 'Bez limitacije'
  }
  state.dailyLimit = displayValues[value] || value
  showNotification("update", `Dnevni limit je postavljen na: ${state.dailyLimit}`)
}

function setMonthlyLimit(value) {
  const displayValues = {
    '50000': '‚Ç¨50,000',
    '100000': '‚Ç¨100,000',
    '200000': '‚Ç¨200,000',
    'unlimited': 'Bez limitacije'
  }
  state.monthlyLimit = displayValues[value] || value
  showNotification("update", `Mjeseƒçni limit je postavljen na: ${state.monthlyLimit}`)
}

/* AI CHAT */
function askAI(){
  const q = document.getElementById("chatInput").value.trim().toLowerCase()
  if (!q) return

  const userMsg = document.createElement("div")
  userMsg.className = "msg user"
  userMsg.textContent = q
  document.getElementById("chatLog").appendChild(userMsg)

  let response = randomAIResponses[Math.floor(Math.random() * randomAIResponses.length)]
  
  if (q.includes("stanje") || q.includes("saldo") || q.includes("balanc")) {
    const currSymbol = currencyEl.value === "EUR" ? "‚Ç¨" : currencyEl.value === "BAM" ? "KM" : "$"
    const displayAmount = currencyEl.value === "EUR" ? state.balanceEUR : 
                         currencyEl.value === "BAM" ? state.balanceEUR * RATE_BAM :
                         state.balanceEUR * RATE_USD
    response = `üí∞ Tvoje trenutno stanje je ${currSymbol}${displayAmount.toFixed(2)}`
  }
  else if (q.includes("rizik")) response = `üõ°Ô∏è Trenutni rizik je ${Math.round(state.risk)}%`
  else if (q.includes("kartica")) response = state.frozen ? " Kartica je zamrznuta." : " Kartica je aktivna i spremna."
  else if (q.includes("transakcij")) {
    const total = state.transactions.reduce((a, b) => a + b, 0)
    response = ` Izvr≈°io si ${state.transactions.length} transakcija sa ukupno ‚Ç¨${total.toFixed(2)}`
  }
  else if (q.includes("sigurnost")) response = " Tvoj raƒçun je za≈°tiƒáen sa najvi≈°om razinom enkripcije i AI monitoringom!"
  else if (q.includes("limite")) response = ` Dnevni limit je ${state.dailyLimit}, mjeseƒçni je ${state.monthlyLimit}`
  else if (q.includes("povratak") || q.includes("povrat")) response = " Povratne poreze trebaju 5-7 radnih dana."
  else if (q.includes("podr≈°ka") || q.includes("pomoc")) response = " Na≈° tim podr≈°ke je dostupan 24/7. Kontaktiraj nas na support@fintechnova.com."
  else if (q.includes("plaƒáanje") || q.includes("transfer")) response = "Mo≈æe≈° izvr≈°iti plaƒáanje putem brze akcije 'Prijenos' ili popuniti formu za plaƒáanje."
  else if (q.includes("valuta") || q.includes("kurs")) response = " Mo≈æe≈° vidjeti sve kursne stope u sekciji 'Kursne Stope' ispod opcija plaƒáanja."

  setTimeout(() => {
    const botMsg = document.createElement("div")
    botMsg.className = "msg bot"
    botMsg.textContent = response
    document.getElementById("chatLog").appendChild(botMsg)
    document.getElementById("chatLog").scrollTop = document.getElementById("chatLog").scrollHeight
  }, 600)

  document.getElementById("chatInput").value = ""
  document.getElementById("chatLog").scrollTop = document.getElementById("chatLog").scrollHeight
}

/* TOGGLE SETTINGS */
function toggleSetting(e, label, isRealSetting = false){
  e.currentTarget.classList.toggle("active")
  const isActive = e.currentTarget.classList.contains("active")
  showNotification("success", `${isActive ? "‚úÖ" : "‚ùå"} ${label} je ${isActive ? "aktivirana" : "deaktivirana"}`)
}

/* CURRENCY CHANGE EVENT */
currencyEl.addEventListener("change", function(){
  const currNames = {"EUR": "EUR (Evro)", "BAM": "BAM (Marka)", "USD": "USD (Dolar)"}
  showNotification("success", notificationMessages.currency_change + currNames[this.value])
  render()
})

/* CLOSE MODAL ON OUTSIDE CLICK */
settingsModal.addEventListener("click", function(e){
  if(e.target === settingsModal) closeSettings()
})

/* INITIALIZE */
initCurrencyList()
render()

// Show update banner after 3 seconds
setTimeout(() => {
  showUpdateBanner()
}, 3000)

document.addEventListener('DOMContentLoaded', showUpdateIfNeeded);

function login(){
  // ... tvoja loading animacija
  setTimeout(() => {
    document.getElementById("loginScreen").classList.remove("active")
    box.classList.remove("loading")
    render()
    updateHeader()

    // scroll automatski na dashboard / home
    const home = document.getElementById("home")
    if(home) home.scrollIntoView({ behavior: "smooth" })
  }, 1600)
}

function goToHome() {
  // tra≈æimo element home
  const homeSection = document.getElementById("home")
  if (!homeSection) return // ako ne postoji, ni≈°ta ne radimo

  // scrollamo animirano do tog elementa
  homeSection.scrollIntoView({ behavior: "smooth" })
}

// SALDO ‚Üí scroll + highlight
document.getElementById('headerBalanceStat')
  .addEventListener('click', () => {
    const balanceSection = document.querySelector('.balance-section');
    balanceSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
    balanceSection.classList.add('highlight');
    setTimeout(() => balanceSection.classList.remove('highlight'), 1300);
  });

// RIZIK ‚Üí highlight risk kartice
document.getElementById('headerRiskStat')
  .addEventListener('click', () => {
    const riskCard = document.querySelector('#riskChart').closest('.card');
    riskCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
    riskCard.classList.add('highlight');
    setTimeout(() => riskCard.classList.remove('highlight'), 1300);
  });

</script>
</body>
</html>
